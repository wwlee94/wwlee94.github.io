---
title: '[í† ë¹„ì˜ ìŠ¤í”„ë§] 3. ì „ëµ íŒ¨í„´ê³¼ í…œí”Œë¦¿/ì½œë°±ì— ëŒ€í•´ì„œ'
date: '2020-06-23'
category: 'study'
description: 'Java, Spring í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì— ëŒ€í•´ì„œ'
emoji: 'ğŸ“ƒ'
---

## ê°œìš”

`í™•ì¥`ì—ëŠ” ììœ ë¡­ê²Œ ì—´ë ¤ìˆê³  `ë³€ê²½`ì—ëŠ” êµ³ê²Œ ë‹«í˜€ ìˆë‹¤ëŠ” ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ í•µì‹¬ ì›ì¹™ì¸ `ê°œë°© íì‡„ ì›ì¹™`(OCP) ì„ ìƒê°í•´ë´…ì‹œë‹¤.  
ê°ê° ë‹¤ë¥¸ ëª©ì ê³¼ ì´ìœ ì— ì˜í•´ì„œ ë‹¤ë¥¸ ì‹œì ì— ë…ë¦½ì ìœ¼ë¡œ ë³€ê²½ë  ìˆ˜ ìˆëŠ” íš¨ìœ¨ì ì¸ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì´ `ê°œë°© íì‡„ ì›ì¹™`ì…ë‹ˆë‹¤.

`í…œí”Œë¦¿`ì´ë€ ì´ë ‡ê²Œ ë°”ë€ŒëŠ” ì„±ì§ˆ ì¤‘ì—ì„œë„ `ë³€ê²½ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ì„±ì§ˆì„ ê°€ì§„ ë¶€ë¶„`ì„ `ììœ ë¡­ê²Œ ë³€ê²½ë˜ëŠ” ì„±ì§ˆì„ ê°€ì§„ ë¶€ë¶„`ìœ¼ë¡œë¶€í„° ë¶„ë¦¬ì‹œì¼œ íš¨ê³¼ì ìœ¼ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## ë³€í•˜ëŠ” ê²ƒê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒ

JDBCì—ì„œ `try/catch/finally` ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì ìš©í•œ ì½”ë“œë¥¼ ë³´ë©´ì„œ ìƒê°í•´ë´…ì‹œë‹¤.

```java:title=Java
public void deleteAll() throws SQLException {
    Connection c = null;
    PreparedStatement ps = null;

    try {
        c = dataSource.getConnection();
        ps = c.prepareStatement("delete from users"); // ë³€í•˜ëŠ” ë¶€ë¶„
        ps.executeUpdate();
    } catch (SQLException e) {
        throw e;
    } finally {
        if (ps != null) {
            try {
                ps.close();
            } catch (SQLException e) {
            }
        }

        if (c != null) {
            try {
                c.close();
            } catch (SQLException e) {
            }
        }
    }
}
```

ì½”ë“œë¥¼ ë³´ìë§ˆì ë„ˆë¬´ ë§‰ë§‰í•©ë‹ˆë‹¤ ğŸ˜¦  
ë³µì¡í•œ `try/catch/finally` ë¸”ë¡ì´ 2ì¤‘ìœ¼ë¡œ ì¤‘ì²©ê¹Œì§€ë˜ë©° ë§Œë“œëŠ” ëª¨ë“  ë©”ì†Œë“œë§ˆë‹¤ ì½”ë“œê°€ ë°˜ë³µë  ê²ƒì…ë‹ˆë‹¤.

**ì´ëŸ° ì½”ë“œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì—†ì„ê¹Œ?**

ì´ ë¬¸ì œì˜ í•µì‹¬ì€ ë§ì€ ê³³ì—ì„œ `ì¤‘ë³µë˜ê³  ë³€í•˜ì§€ ì•ŠëŠ” ì½”ë“œ` ì™€ `ìì£¼ í™•ì¥ë˜ê³  ë³€í•˜ëŠ” ì½”ë“œ`ë¥¼ `ë¶„ë¦¬`í•´ë‚´ëŠ” ì‘ì—…ì…ë‹ˆë‹¤.

ìœ„ì˜ ì½”ë“œì—ì„œ `ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„`ê³¼ `ë³€í•˜ëŠ” ë¶€ë¶„`ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„

   - DBë¥¼ ì—°ê²°í•˜ê³  ì¿¼ë¦¬ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜(close) ì‘ì—…

2. ë³€í•˜ëŠ” ë¶€ë¶„
   - PrepareStatementë¥¼ ìƒì„±í•˜ëŠ” ì‘ì—… + ì¿¼ë¦¬ë¬¸

#### ì‘ì—…ì˜ ë¶„ë¦¬

ì´ë ‡ê²Œ êµ¬ë¶„ì§€ì€ ì‘ì—…ì„ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì€ ë³´í†µ `3ê°€ì§€ ë°©ë²•`ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. ë©”ì†Œë“œ ì¶”ì¶œ ë°©ë²•

2. í…œí”Œë¦¿ ë©”ì†Œë“œ íŒ¨í„´ì˜ ì ìš©

3. ì „ëµ íŒ¨í„´ì˜ ì ìš©

ì²«ë²ˆì§¸, `ë©”ì†Œë“œ ì¶”ì¶œ ë°©ë²•`ì€ ì¤‘ë³µì´ ë§ì´ ì¼ì–´ë‚˜ëŠ” ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë©”ì†Œë“œë¡œ ì¶”ì¶œí•´ì•¼í•˜ì§€ë§Œ, ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì´ ë³€í•˜ëŠ” ë¶€ë¶„ì„ ê°ì‹¸ëŠ” êµ¬ì¡°ì´ê¸°ì— ì ìš©ì´ ì• ë§¤í•©ë‹ˆë‹¤.

ë‘ë²ˆì§¸, `í…œí”Œë¦¿ ë©”ì†Œë“œ íŒ¨í„´ ë°©ë²•`ì€ ìƒì†ì„ í†µí•´ ê¸°ëŠ¥ì„ í™•ì¥ì‹œí‚¤ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.  
í•˜ì§€ë§Œ, ìƒì†ì€ ë‹¤ì¤‘ ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ê³  DAO ë¡œì§ë§ˆë‹¤ ìƒì†ì„ í†µí•´ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì•¼í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

ì„¸ë²ˆì§¸, `ì „ëµ íŒ¨í„´ ë°©ë²•`ì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ì•„ì˜ˆ ë‘˜ë¡œ ë¶„ë¦¬í•˜ê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ì„œë§Œ ì˜ì¡´í•˜ë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

#### ì „ëµ íŒ¨í„´ì˜ ì ìš©

ì—¬ê¸°ì„œëŠ” ì„¸ë²ˆì§¸ `ì „ëµ íŒ¨í„´ ë°©ë²•`ì„ ì ìš©í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

ë³€í•˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•œ ê²ƒì„ ì „ëµ íŒ¨í„´ì—ì„œ `ì „ëµ`ì´ë¼ê³  í•©ë‹ˆë‹¤.

ë¨¼ì €, ì´ë¥¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬í•˜ë©´

**1. StatementStrategy ì „ëµ ì¸í„°í˜ì´ìŠ¤**

```java:title=Java
public interface StatementStrategy {
    PreparedStatement makePreparedStatement(Connection c) throws SQLException;
}
```

**2. deleteAll() ë©”ì†Œë“œì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ StatementStrategy ì „ëµ í´ë˜ìŠ¤**

```java:title=Java
public class DeleteAllStatement implements StatementStrategy {
    @Override
    public PreparedStatement makePreparedStatement(Connection c) throws SQLException {
        PreparedStatement ps = c.prepareStatement("delete from users");
        return ps;
    }
}
```

ë‹¤ìŒìœ¼ë¡œ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.  
ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•œ ê²ƒì„ `ì»¨í…ìŠ¤íŠ¸`ë¼ê³  í•©ë‹ˆë‹¤.

**3. ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬í•œ ì»¨í…ìŠ¤íŠ¸ ì½”ë“œ**

```java:title=Java
public void jdbcContextWithStatementStrategy(StatementStrategy stmt) throws SQLException {
    Connection c = null;
    PreparedStatement ps = null;

    try {
        c = dataSource.getConnection();
        ps = stmt.makePreparedStatement(c); // ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì „ëµ ì‚¬ìš©
        ps.executeUpdate();
    } catch (SQLException e) {
        throw e;
    } finally {
        if (ps != null) { try { ps.close();} catch (SQLException e) {}}
        if (c != null) { try { c.close();} catch (SQLException e) {}}
    }
}
```

ë‹¤ìŒìœ¼ë¡œ `í´ë¼ì´ì–¸íŠ¸`ì—ì„œ ì§ì ‘ì ìœ¼ë¡œ `ì „ëµì„ ìƒì„±, ì„ íƒ`í•´ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.  
ì „ëµì„ ìƒì„±í•˜ê³  ìƒì„±í•œ ì „ëµì„ ì»¨í…ìŠ¤íŠ¸ì— `DI` í•´ì¤ë‹ˆë‹¤.

**4. í´ë¼ì´ì–¸íŠ¸ ì±…ì„ì„ ë‹´ë‹¹í•  deleteAll() ë©”ì†Œë“œ**

```java:title=Java
public void deleteAll() throws SQLException {
    StatementStrategy st = new DeleteAllStatement();
    jdbcContextWithStatementStrategy(st);
}
```

ì´ì œ êµ¬ì¡°ë¡œ ë³¼ë•ŒëŠ” ì™„ë²½í•œ ì „ëµ íŒ¨í„´ì˜ ëª¨ìŠµì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

#### ë” ê°œì„ í•  ì 

ì§€ê¸ˆì˜ êµ¬ì¡°ë¡œëŠ” `DAO` ë©”ì†Œë“œë§ˆë‹¤ ìƒˆë¡œìš´ `StatementStrategy` êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.

í•´ê²° ë°©ë²•ì€ `ìµëª… í´ë˜ìŠ¤` or `ëŒë‹¤`ë¥¼ í™œìš©í•´ ë¬¸ì œì ì„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ëŒë‹¤ë¥¼ í™œìš©í•œ ì˜ˆì œ**

Java 8ë²„ì „ì—ì„œ ì œê³µë˜ëŠ” `ëŒë‹¤`ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì†Œë“œë¥¼ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•´ì•¼í•©ë‹ˆë‹¤.

ìœ„ì™€ ê°™ì´ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì†Œë“œ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ `í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤`ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ `@FunctionalInterface`ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ ìˆëŠ”ë°, í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ì•Œë ¤ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¡°ê±´ì„ ìœ„ë°˜í•˜ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” ì˜ˆëŸ¬ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.

```java:title=Java
@FunctionalInterface
public interface StatementStrategy {
    PreparedStatement makePreparedStatement(Connection c) throws SQLException;
}
```

```java:title=Java
public void deleteAll() throws SQLException {
    jdbcContextWithStatementStrategy((Connection c) -> {
        return c.prepareStatement("delete from users");
    });
}
```

## í…œí”Œë¦¿ê³¼ ì½œë°±

ì§€ê¸ˆê¹Œì§€ ë§Œë“  ì½”ë“œëŠ” `ì „ëµ íŒ¨í„´`ì´ ì ìš©ë˜ì—ˆë‹¤ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ìœ„ì˜ ì½”ë“œë“¤ ì²˜ëŸ¼ ë³µì¡í•˜ì§€ë§Œ ë°”ë€Œì§€ ì•ŠëŠ” ì¼ì •í•œ íŒ¨í„´ì„ ê°–ëŠ” ì‘ì—… íë¦„ì´ ì¡´ì¬í•˜ê³  ê·¸ì¤‘ ì¼ë¶€ë§Œ ìì£¼ ë°”ê¿”ì„œ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê²½ìš°ì— ì í•©í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.

ì „ëµ íŒ¨í„´ì˜ ê¸°ë³¸ êµ¬ì¡°ì— ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ , ëŒë‹¤ë¥¼ í™œìš©í•œ ë°©ì‹ì„ ìŠ¤í”„ë§ì—ì„œëŠ” `í…œí”Œë¦¿/ì½œë°±` íŒ¨í„´ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ì „ëµ íŒ¨í„´ì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ `í…œí”Œë¦¿`ì´ë¼í•˜ê³  ìµëª… í´ë˜ìŠ¤, ëŒë‹¤ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ `ì½œë°±`ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

#### í…œí”Œë¦¿/ì½œë°±ì˜ ë™ì‘ ë°©ì‹

`í´ë¼ì´ì–¸íŠ¸`ì˜ ì—­í• ì€ í…œí”Œë¦¿ ì•ˆì—ì„œ ì‹¤í–‰ë  ë¡œì§ì„ ë‹´ì€ ì½œë°± ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì½œë°±ì´ ì°¸ì¡°í•  ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

`í…œí”Œë¦¿`ì€ ë‚´ë¶€ì—ì„œ ìƒì„±í•œ ì°¸ì¡° ì •ë³´ë¥¼ ê°€ì§€ê³  ì½œë°± ì˜¤ë¸Œì íŠ¸ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.  
ê·¸ í›„, ì½œë°±ì€ í´ë¼ì´ì–¸íŠ¸ì˜ ì •ë³´ì™€ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ì‘ì—…ì„ ìˆ˜í–‰ í•œ ë’¤ ë‹¤ì‹œ í…œí”Œë¦¿ì—ê²Œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

`í…œí”Œë¦¿`ì€ ì½œë°±ì´ ë°˜í™˜í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ì‘ì—…ì„ ë§ˆì € ìˆ˜í–‰í•©ë‹ˆë‹¤.  
ê²½ìš°ì— ë”°ë¼ ìµœì¢… ê²°ê³¼ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜í•©ë‹ˆë‹¤.

#### í…œí”Œë¦¿/ì½œë°±ì˜ ì‘ìš©

ìŠ¤í”„ë§ ê°œë°œìë¼ë©´ `í…œí”Œë¦¿/ì½œë°±` ê¸°ëŠ¥ì„ ì˜ ì‚¬ìš©í•˜ê±°ë‚˜ í•„ìš”í•œ ê³³ì´ ìˆìœ¼ë©´ ì§ì ‘ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ê³  í•©ë‹ˆë‹¤.

ê³ ì •ëœ ì‘ì—… íë¦„ì„ ê°–ê³  ìˆìœ¼ë©´ì„œ ì—¬ëŸ¬ ê³³ì—ì„œ ìì£¼ ë°˜ë³µë˜ëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´, ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬í•  ë°©ë²•ì„ ìƒê°í•´ë³´ëŠ” ìŠµê´€ì„ ê°€ì§€ë©´ ì¢‹ìŠµë‹ˆë‹¤.

ë¨¼ì € `ë©”ì†Œë“œë¡œ ë¶„ë¦¬`í•´ë³´ê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ `ì „ëµ íŒ¨í„´`ì„ ì ìš©í•´ DIë¡œ ì˜ì¡´ ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.  
ê·¸ëŸ°ë°, ì—¬ê¸°ì„œ ë°”ë€ŒëŠ” ë¶€ë¶„ì´ í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì—ì„œ ë™ì‹œì— `ì—¬ëŸ¬ ì¢…ë¥˜`ë¡œ ë§Œë“¤ì–´ ì§ˆ ìˆ˜ ìˆë‹¤ë©´ ì´ë²ˆì—” `í…œí”Œë¦¿/ì½œë°±` íŒ¨í„´ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ íŒŒì¼ì„ ì½ì–´ ìˆ˜ë¥¼ ë”í•˜ê±°ë‚˜ ê³±í•˜ëŠ” ì˜ˆì œë¥¼ ë³´ê³  ë” ê¹Šê²Œ ì´í•´í•´ë´…ì‹œë‹¤ !

**ë”í•˜ê¸° ë©”ì†Œë“œ**

```java:title=Java
public Integer calSum(BufferedReader br){
    Integer sum = 0;
    String line = null;
    while((line==br.readline()) != null){
        sum += Integer.valueOf(line); // ë°”ë€ŒëŠ” ì½”ë“œ
    }
    return sum;
}
```

**ê³±í•˜ê¸° ë©”ì†Œë“œ**

```java:title=Java
public Integer calMultiply(BufferedReader br){
    Integer multiply = 1;
    String line = null;
    while((line==br.readline()) != null){
        multiply *= Integer.valueOf(line); // ë°”ë€ŒëŠ” ì½”ë“œ
    }
    return multiply;
}
```

ì¡°ê¸ˆë§Œ ì‚´í´ë´ë„ ë‘ ì½”ë“œê°€ ì•„ì£¼ ìœ ì‚¬í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. ê²°ê³¼ë¥¼ ì €ì¥í•  ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”
2. BufferedReaderë¥¼ ì´ìš©í•´ íŒŒì¼ì„ í•œì¤„ í•œì¤„ ì½ìŠµë‹ˆë‹¤.
3. ë³€ìˆ˜ì— ê³„ì‚°í•œ ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
4. íŒŒì¼ì„ ë‹¤ ì½ì—ˆìœ¼ë©´ ê²°ê³¼ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.

í…œí”Œë¦¿ê³¼ ì½œë°±ì„ ì°¾ì•„ë‚¼ë•ŒëŠ” ë³€í•˜ëŠ” ì½”ë“œì˜ ê²½ê³„ë¥¼ ì°¾ê³  ê·¸ ê²½ê³„ë¥¼ ì‚¬ì´ì— ë‘ê³  ì£¼ê³  ë°›ëŠ” ì¼ì •í•œ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ ë°”ë€ŒëŠ” ì½”ë“œëŠ” ë‹¨ í•œì¤„ì…ë‹ˆë‹¤.

ë°”ë€ŒëŠ” ì½”ë“œ(ì½œë°±)ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•©ë‹ˆë‹¤.

**ë¼ì¸ë³„ ì‘ì—…ì„ ì •ì˜í•œ ì¸í„°í˜ì´ìŠ¤**

```java:title=Java
@FunctionalInterface
public interface LineCallback{
    Integer doSomethingWithLine(String line, Integer value);
}
```

**LineCallbackì„ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿**

```java:title=Java
public Integer lineReadTemplate(String filepath, LineCallback callback, int initVal){
    BufferedReader br = null;
    try{
        br = new BufferedReader(new FileReader(filepath));
        Integer res = initVal;
        String line = null;
        while((line==br.readline()) != null){
            res = callback.doSomethingWithLine(line, res);
        }
        return res;
    }
    catch(){...}
    finally{...}
}
```

**í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œ calSum() ë©”ì„œë“œ**

```java:title=Java
public Integer calSum(String filepath){
    LineCallback sumCallback = (line, value) -> { return value + Integer.valueOf(line); };
    return lineReadTemplate(filepath, sumCallback, 0);
}
```

#### ì œë„¤ë¦­ìŠ¤ë¥¼ í™œìš©í•œ ì½œë°± ì¸í„°í˜ì´ìŠ¤

`ì œë„¤ë¦­`ì„ ì‚¬ìš©í•˜ë©´ ì¢€ ë” ê°•ë ¥í•œ `í…œí”Œë¦¿/ì½œë°±` êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ„ì˜ ì˜ˆì œëŠ” ê²°ê³¼ê°€ `Integer`ë¡œ ê³ ì •ë˜ì–´ ìˆì§€ë§Œ `ì œë„¤ë¦­`ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ì–‘í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java:title=Java
public interface LineCallback<T>{
    T doSomethingWithLine(String line, T value);
}
```
