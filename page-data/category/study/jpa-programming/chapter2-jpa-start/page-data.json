{"componentChunkName":"component---src-templates-post-tsx","path":"/category/study/jpa-programming/chapter2-jpa-start/","result":{"data":{"site":{"siteMetadata":{"title":"Blausee 기술 블로그","author":"wwlee94","siteUrl":"https://wwlee94.github.io"}},"markdownRemark":{"id":"b31524e3-864c-5fd1-a253-2352c600ad19","excerpt":"1. 객체 매핑 시작 매핑 정보가 포함된 회원 클래스  2. 데이터 베이스 방언 JPA는 특정 데이터베이스에 종속적이지 않은 기술이여서 다른 데이터베이스로 손쉽게 교체할 수 있습니다. 그런데, 각 데이터 베이스가 제공하는 SQL…","html":"<h2 id=\"1-객체-매핑-시작\" style=\"position:relative;\"><a href=\"#1-%EA%B0%9D%EC%B2%B4-%EB%A7%A4%ED%95%91-%EC%8B%9C%EC%9E%91\" aria-label=\"1 객체 매핑 시작 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 객체 매핑 시작</h2>\n<p><strong>매핑 정보가 포함된 회원 클래스</strong></p>\n<div class=\"gatsby-code-title\">Java</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>persistence</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Table</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"MEMBER\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@Setter</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"ID\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"NAME\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> age<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f46d446e2e96de4b7dbc892a3f07f17f/6b95e/JPA_class_table_mapping.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.23404255319149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABmklEQVQozx2Rf2+aYBSF+W5LbLWztWIBAUF+gyiCoA6prZ3t1jTZvvKzO/44yZs3uec8515lOvMwzAjTSUUZuhVhLPJeeXEi37SESYMXVvjxjkDk+tteXrglTGuCpMJyU5mNUTQjxPFSiupIkldMdRcn2GIv16zEcLN7YX96p2peKeTdHK9E6V6MK2w3pnu5cv34ktANhhWKobnifuqjaiGzeYI6T3HDHZq96jWR/yg/kpfPLIIKxy/RzYRlWIrhmqLsKOszU02a2gnKTE8kremrrauz0FWYy4IgO3B++8Oh+81eqOrmjVP3yXP3ITR1T5+sfnA6f9LKnzYPJShCUZ8CnvRI0vK+pmZlvR5UD1WPmbsl7fmLy8+/2N5WBmOmMhPEtayopWwu7ET3UwdzkaI8PLqMxpbscY2zzJnMfNlFKodKsJwNftoSZS2ekBv2/6OlfeV0fewJi/JV9nuRcAGTeyg3Q53Nao8vZll+IM4avg1mDG51hncWEzVkPHG5vZszGOncjAyG303Gj05v1Enl+nCR6r8EJOYfhaIy/aC5rmMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JPA 테이블 매핑\"\n        title=\"JPA 테이블 매핑\"\n        src=\"/static/f46d446e2e96de4b7dbc892a3f07f17f/1d69c/JPA_class_table_mapping.png\"\n        srcset=\"/static/f46d446e2e96de4b7dbc892a3f07f17f/4dcb9/JPA_class_table_mapping.png 188w,\n/static/f46d446e2e96de4b7dbc892a3f07f17f/5ff7e/JPA_class_table_mapping.png 375w,\n/static/f46d446e2e96de4b7dbc892a3f07f17f/1d69c/JPA_class_table_mapping.png 750w,\n/static/f46d446e2e96de4b7dbc892a3f07f17f/78797/JPA_class_table_mapping.png 1125w,\n/static/f46d446e2e96de4b7dbc892a3f07f17f/6b95e/JPA_class_table_mapping.png 1458w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"2-데이터-베이스-방언\" style=\"position:relative;\"><a href=\"#2-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%B0%A9%EC%96%B8\" aria-label=\"2 데이터 베이스 방언 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 데이터 베이스 방언</h2>\n<p>JPA는 특정 데이터베이스에 종속적이지 않은 기술이여서 다른 데이터베이스로 손쉽게 교체할 수 있습니다.</p>\n<p>그런데, 각 데이터 베이스가 제공하는 SQL 문법과 함수가 조금씩 다르다는 문제점이있습니다.</p>\n<ul>\n<li>\n<p>데이터 타입</p>\n<ul>\n<li>가변 문자 타입으로 MySQL은 VARCHAR, 오라클은 VARCHAR2</li>\n</ul>\n</li>\n<li>\n<p>다른 함수명</p>\n<ul>\n<li>문자열 자르는 함수로 SQL 표준은 SUBSTRING(), 오라클은 SUBSTR()</li>\n</ul>\n</li>\n<li>\n<p>페이징 처리</p>\n<ul>\n<li>MySQL은 LIMIT, 오라클은 ROWNUM</li>\n</ul>\n</li>\n</ul>\n<p>SQL 표준을 지키지 않거나 특정 데이터베이스만의 고유한 기능을 JPA에서는 <code class=\"language-text\">Dialect(방언)</code>이라고 한다.</p>\n<h2 id=\"3-애플리케이션-개발\" style=\"position:relative;\"><a href=\"#3-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B0%9C%EB%B0%9C\" aria-label=\"3 애플리케이션 개발 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 애플리케이션 개발</h2>\n<p><strong>시작 코드</strong></p>\n<div class=\"gatsby-code-title\">Java</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>persistence</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMain</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">//엔티티 매니저 팩토리 생성</span>\n        <span class=\"token class-name\">EntityManagerFactory</span> emf <span class=\"token operator\">=</span> <span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManagerFactory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jpabook\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">EntityManager</span> em <span class=\"token operator\">=</span> emf<span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//엔티티 매니저 생성</span>\n        <span class=\"token class-name\">EntityTransaction</span> tx <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//트랜잭션 기능 획득</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\n            tx<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//트랜잭션 시작</span>\n            <span class=\"token function\">logic</span><span class=\"token punctuation\">(</span>em<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//비즈니스 로직</span>\n            tx<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//트랜잭션 커밋</span>\n\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            tx<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//트랜잭션 롤백</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            em<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//엔티티 매니저 종료</span>\n        <span class=\"token punctuation\">}</span>\n\n        emf<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//엔티티 매니저 팩토리 종료</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8f51fbeb426bfedeb9743eb776d85680/10d53/JPA_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.08510638297872%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVUlEQVQozx2QSU9TYRSG+4uMxoEhoG1JRy7c3tu5tPd2HmhLB9peUCgtlApVxGDEqIHExLjBlRuJiQsXDix070YTF7oxQTduH7928eY7X07O+z7nmByzQSKxAol0FT1VJZVrkBTyR3Kk8w0qtXXRL5IvrZAtNMgI5RZblKprlOttciWD7GKDWKJEIJLB5JIiGEaXre6ATmeXzsYOG6LWkhVhvkyxcmsUMhgcsN27y+7Offrbe9zu3xvNbG4ORnW+2GRe1TBJsoYvmCMQzqELk1BsEW84z6yi45yLYpcWcM5H8QYzRLQS/lAWfzgraJukssssaEW8gSRqIIHsFYZD/FSuSSbfEmutInmTOGVdGMZxe+JISgJJTaCE8nh8SVwuPx4lSrlsCK2gCiqnFBK9uCCMYbLaVJGQxi8IhndciJdQg1kkj457XkMJ5pH9WRR/Br3codw7YuXgJZtHp9TvvCBn7AkyHcWnM+eJDleOUCgarLX7GKtdeuIeBZGuCWNZTRLSqvhCBUGlURk858G7Xzz59IfD9795+OGcwdufZOtbuATlkNQ0L1yN1gb12k1azTa16iqtxjrpTBWbI4jiTSGL9Z1SGJdTpbZ/Qv/0B3un39h9PdR3uq++Ek5WmZpyYBqbsHPdLGG2yszYFG5Y5rDMyJiFrltkHO4gMw51JKtdxS0o2sdvePz5H0/Pznn08ZzDs790T77gFuGmCxenuXTFwuWrVq6N20RtHtVjk3YmppxMTrsYF8nD/9ikgwnxusRgsrXPUu+Ypf4z8uuHhEtbTAuA/yFFj8dDXUMbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JPA 엔티티매니저 생성 과정\"\n        title=\"JPA 엔티티매니저 생성 과정\"\n        src=\"/static/8f51fbeb426bfedeb9743eb776d85680/1d69c/JPA_2.png\"\n        srcset=\"/static/8f51fbeb426bfedeb9743eb776d85680/4dcb9/JPA_2.png 188w,\n/static/8f51fbeb426bfedeb9743eb776d85680/5ff7e/JPA_2.png 375w,\n/static/8f51fbeb426bfedeb9743eb776d85680/1d69c/JPA_2.png 750w,\n/static/8f51fbeb426bfedeb9743eb776d85680/78797/JPA_2.png 1125w,\n/static/8f51fbeb426bfedeb9743eb776d85680/aa440/JPA_2.png 1500w,\n/static/8f51fbeb426bfedeb9743eb776d85680/10d53/JPA_2.png 1724w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>코드는 크게 3부분으로 나뉘어 있습니다.</p>\n<ol>\n<li>엔티티 매니저 설정</li>\n<li>트랜잭션 관리</li>\n<li>비즈니스 로직</li>\n</ol>\n<h4 id=\"1-엔티티-매니저-설정\" style=\"position:relative;\"><a href=\"#1-%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%A7%A4%EB%8B%88%EC%A0%80-%EC%84%A4%EC%A0%95\" aria-label=\"1 엔티티 매니저 설정 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 엔티티 매니저 설정</h4>\n<p><strong>엔티티 매니저 팩토리 생성</strong></p>\n<p>애플리케이션의 설정 정보를 사용해서 엔티티 매니저 팩토리를 생성합니다.</p>\n<p>JPA 구현체에 따라서 따라 데이터베이스 <code class=\"language-text\">커넥션 풀</code>도 생성하므로 생성 비용이 아주 큽니다.</p>\n<p>따라서, <code class=\"language-text\">엔티티 매니저 팩토리</code>는 애플리케이션 전체에서 딱 한 번만 생성하고 <code class=\"language-text\">공유해서 사용</code>해야합니다.</p>\n<div class=\"gatsby-code-title\">Java</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">EntityManagerFactory</span> emf <span class=\"token operator\">=</span> <span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManagerFactory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jpabook\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>엔티티 매니저 생성</strong></p>\n<p>엔티티 매니저를 사용해서 엔티티를 데이터베이스에 등록/수정/삭제/조회할 수 있습니다.</p>\n<p><code class=\"language-text\">엔티티 매니저</code>는 데이터베이스 커넥션과 밀접한 관계가 있으므로 스레드간에 <code class=\"language-text\">공유하거나 재사용하면 안됩니다.</code></p>\n<p>엔티티 매니저는 데이터베이스 연결이 꼭 필요한 시점까지 커넥션을 얻지 않고 트랜잭션을 시작할 때 커넥션을 획득합니다.</p>\n<div class=\"gatsby-code-title\">Java</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">EntityManager</span> em <span class=\"token operator\">=</span> emf<span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h4 id=\"2-트랜잭션-관리\" style=\"position:relative;\"><a href=\"#2-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC\" aria-label=\"2 트랜잭션 관리 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 트랜잭션 관리</h4>\n<p>JPA를 사용하면 항상 트랜잭션 안에서 데이터를 변경해야합니다.\n트랜잭션 없이 데이터를 변경하면 예외 발생하고 트랜잭션을 시작하려면 엔티티 매니저에서 트랜잭션 API를 받아와야 합니다.</p>\n<div class=\"gatsby-code-title\">Java</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">EntityTransaction</span> tx <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//트랜잭션 기능 획득</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\n    tx<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//트랜잭션 시작</span>\n    <span class=\"token function\">logic</span><span class=\"token punctuation\">(</span>em<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//비즈니스 로직</span>\n    tx<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//트랜잭션 커밋</span>\n\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    tx<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//트랜잭션 롤백</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>정상 동작하면 트랜잭션을 <code class=\"language-text\">커밋(commit)</code>, 예외가 발생하면 <code class=\"language-text\">롤백(rollback)</code>합니다.</p>\n<h4 id=\"3-비즈니스-로직\" style=\"position:relative;\"><a href=\"#3-%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EB%A1%9C%EC%A7%81\" aria-label=\"3 비즈니스 로직 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 비즈니스 로직</h4>\n<p>회원 엔티티를 하나 생성한 다음 엔티티 매니저를 통해 데이터베이스에 등록, 수정, 삭제, 조회합니다.</p>\n<p><strong>수정</strong></p>\n<p><code class=\"language-text\">em.update()</code>를 호출할 것 같은데 없고 단순하게 엔티티의 <code class=\"language-text\">값만 변경</code>합니다.</p>\n<p>JPA는 어떤 엔티티가 변경되었는지 <code class=\"language-text\">추적</code>하는 기능을 갖추고 있습니다.</p>\n<h2 id=\"jpql\" style=\"position:relative;\"><a href=\"#jpql\" aria-label=\"jpql permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPQL</h2>\n<p>JPA는 SQL을 추상화한 <code class=\"language-text\">JPQL(Java Persistence Query Language)</code> 이라는 객체지향 쿼리 언어를 제공합니다.</p>\n<ul>\n<li><code class=\"language-text\">JPQL</code> : 엔티티 객체를 대상으로 쿼리, JPQL은 데이터베이스 테이블을 알지 못함</li>\n<li><code class=\"language-text\">SQL</code> : 데이터베이스 테이블을 대상으로 쿼리</li>\n</ul>\n<p><strong>JPQL 예시</strong></p>\n<div class=\"gatsby-code-title\">Java</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> members <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">createQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select m from Member m\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResultList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","tableOfContents":"<ul>\n<li><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#1-%EA%B0%9D%EC%B2%B4-%EB%A7%A4%ED%95%91-%EC%8B%9C%EC%9E%91\">1. 객체 매핑 시작</a></li>\n<li><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#2-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%B0%A9%EC%96%B8\">2. 데이터 베이스 방언</a></li>\n<li>\n<p><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#3-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B0%9C%EB%B0%9C\">3. 애플리케이션 개발</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#1-%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%A7%A4%EB%8B%88%EC%A0%80-%EC%84%A4%EC%A0%95\">1. 엔티티 매니저 설정</a></li>\n<li><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#2-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC\">2. 트랜잭션 관리</a></li>\n<li><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#3-%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EB%A1%9C%EC%A7%81\">3. 비즈니스 로직</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/category/study/jpa-programming/chapter2-jpa-start/#jpql\">JPQL</a></li>\n</ul>","frontmatter":{"title":"[JPA 프로그래밍] 2. JPA 시작","description":"","date":"2020.10.12","emoji":"🚥","category":"study"}}},"pageContext":{"slug":"/category/study/jpa-programming/chapter2-jpa-start/","relatedPosts":[{"node":{"fields":{"slug":"/category/study/jpa-programming/chapter5-relationship-mapping/"},"frontmatter":{"title":"[JPA 프로그래밍] 5. 연관 관계 매핑","date":"2020.10.27","emoji":"🤼‍♂️","category":"study"}}},{"node":{"fields":{"slug":"/category/study/jpa-programming/chapter4-entity-mapping/"},"frontmatter":{"title":"[JPA 프로그래밍] 4. 엔티티 매핑","date":"2020.10.22","emoji":"⛳️","category":"study"}}},{"node":{"fields":{"slug":"/category/study/jpa-programming/chapter3-persistence-context/"},"frontmatter":{"title":"[JPA 프로그래밍] 3. 영속성 관리","date":"2020.10.18","emoji":"⏰","category":"study"}}},{"node":{"fields":{"slug":"/category/study/jpa-programming/chapter1-jpa-introduction/"},"frontmatter":{"title":"[JPA 프로그래밍] 1. JPA 소개","date":"2020.10.05","emoji":"🙌🏻","category":"study"}}}]}}}