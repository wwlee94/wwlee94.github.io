<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1cfadd536e0ed4ee026c.css">pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.23.3"/><link rel="icon" href="/favicon-32x32.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#0c9ee4"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=83455313757f7d5558ecbb4d2c6744cf"/><style type="text/css">
    .anchor-header.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor-header.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor-header svg,
    h2 .anchor-header svg,
    h3 .anchor-header svg,
    h4 .anchor-header svg,
    h5 .anchor-header svg,
    h6 .anchor-header svg {
      visibility: hidden;
    }
    h1:hover .anchor-header svg,
    h2:hover .anchor-header svg,
    h3:hover .anchor-header svg,
    h4:hover .anchor-header svg,
    h5:hover .anchor-header svg,
    h6:hover .anchor-header svg,
    h1 .anchor-header:focus svg,
    h2 .anchor-header:focus svg,
    h3 .anchor-header:focus svg,
    h4 .anchor-header:focus svg,
    h5 .anchor-header:focus svg,
    h6 .anchor-header:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Your Site&#x27;s RSS Feed" href="/rss.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">[JPA 프로그래밍] 3. 영속성 관리 | Blausee 기술 블로그</title><link data-react-helmet="true" rel="canonical" href="https://wwlee94.github.io/category/study/jpa-programming/chapter3-persistence-context/"/><meta data-react-helmet="true" name="description" content="1. 영속성 컨텍스트란? JPA를 이해하는데 가장 중요한 용어는 입니다. 해석하자면, ‘엔티티를 영구 저장하는 환경’이라는 뜻입니다. 논리적인 개념에 가까우며 엔티티 매니저를 생성할 때 하나 만들어집니다. 엔티티 매니저를 통해 영속성 컨텍스트에 접근하고 관리할 수 있습니다.…"/><meta data-react-helmet="true" property="og:title" content="[JPA 프로그래밍] 3. 영속성 관리"/><meta data-react-helmet="true" property="og:description" content="1. 영속성 컨텍스트란? JPA를 이해하는데 가장 중요한 용어는 입니다. 해석하자면, ‘엔티티를 영구 저장하는 환경’이라는 뜻입니다. 논리적인 개념에 가까우며 엔티티 매니저를 생성할 때 하나 만들어집니다. 엔티티 매니저를 통해 영속성 컨텍스트에 접근하고 관리할 수 있습니다.…"/><meta data-react-helmet="true" property="og:image" content="https://wwlee94.github.io/images/ogp.png"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="google-site-verification" content="OxCmDAbFt_oP2EzYabwJiA4KNndMwAcKMQdvpa8vL6w"/><meta data-react-helmet="true" name="naver-site-verification" content="07c520f56835b243f94776be22c4cbcb671bbfe5"/><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","headline":"[JPA 프로그래밍] 3. 영속성 관리","image":"https://wwlee94.github.io/images/ogp.png","editor":"wwlee94","datePublished":"2020-10-18","dateCreated":"2020-10-18","dateModified":"2020-10-18","description":"1. 영속성 컨텍스트란? JPA를 이해하는데 가장 중요한 용어는 입니다. 해석하자면, ‘엔티티를 영구 저장하는 환경’이라는 뜻입니다. 논리적인 개념에 가까우며 엔티티 매니저를 생성할 때 하나 만들어집니다. 엔티티 매니저를 통해 영속성 컨텍스트에 접근하고 관리할 수 있습니다.…","author":{"@type":"Person","name":"wwlee94","image":"https://wwlee94.github.io/images/avatar.png"},"publisher":{"@type":"Organization","name":"wwlee94","logo":{"@type":"ImageObject","url":"https://wwlee94.github.io/images/avatar.png","width":150,"height":150}}}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://wwlee94.github.io","name":"HOME"}},{"@type":"ListItem","position":2,"item":{"@id":"https://wwlee94.github.io/study","name":"스터디"}},{"@type":"ListItem","position":3,"item":{"name":"[JPA 프로그래밍] 3. 영속성 관리"}}]}</script><style data-styled="RRmay eYfJyt fARCIn iRqtPU jzKyDb ghKhoM itpjOs chZKnq lgloNz juBGvQ dcRxDp fpGsDA ewFmUv iPJcKE fFDafD gvYRzK hMlNHl jNfPFJ hAYtIK gndSEd fYkEUy gBhcRP qFAAr gQCnFr" data-styled-version="4.4.1">
/* sc-component-id: sc-global-2971809368 */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-tap-highlight-color:rgba(0,0,0,0);} html,body{height:100%;} body{--bg:#f5f5f5;--textNormal:#21242d;--headerBackground:#ffffff;--bioBackground:#ffffff;--bioColor:rgba(0,0,0,0.87);--bioHighlight:#000000;--categoryHeader:rgba(0,0,0,0.87);--categoryColor:rgba(0,0,0,0.87);--categotyImgage:linear-gradient(-45deg,#ffa649,#f7645b,#805ed4);--postCardColor:rgba(0,0,0,0.87);--postCardHighlight:rgba(0,0,0,0.08);--postCardEmoji:#ffffff;--tableOfContentsFocusColor:rgb(33,37,41) background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;} body.dark{--bg:#21242d;--textNormal:#21242d;--headerBackground:#3B71DA;--bioBackground:#313746;--bioColor:#ffffff;--bioHighlight:#ffffff;--categoryHeader:#ffffff;--categoryColor:#727d86;--categotyImgage:#313746;--postCardColor:#ffffff;--postCardHighlight:#313746;--postCardEmoji:#313746;--tableOfContentsFocusColor:#f1f4f7;background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} a{color:#20a8ea;-webkit-text-decoration:none;text-decoration:none;word-break:break-all;-webkit-transition:.2s;transition:.2s;} a:focus{outline:none;} ol,ul,li{list-style:none;} blockquote,q{quotes:none;} blockquote::before,blockquote::after,q::before,q::after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} img{max-width:100%;} button,input{font-family:inherit;font-size:inherit;background:none;border:none;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;resize:none;} button:focus,input:focus{outline:none;}
/* sc-component-id: ContentWrapper__IndexContent-sc-11a8f56-0 */
.eYfJyt{max-width:1250px;margin:0 auto;padding:0 1.5em;} @media screen and (max-width:950px){.eYfJyt{max-width:760px;}} @media screen and (max-width:500px){.eYfJyt{padding:0 20px;}}
/* sc-component-id: Footer__FooterContent-zn4blm-0 */
.qFAAr{padding:0.1em 0;}
/* sc-component-id: Footer__FooterInner-zn4blm-1 */
.gQCnFr{margin-top:3em;text-align:center;padding:1.5em;border-top:solid 1px #313746;color:#727d86;font-size:14px;} .gQCnFr a{color:#727d86;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: ColorModeToggle__ToggleButton-pbocc9-0 */
.iRqtPU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:auto;cursor:pointer;} .iRqtPU .icon-sun{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#222;} .iRqtPU .icon-moon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#fff;}
/* sc-component-id: Header__HeaderTag-ewwnf4-0 */
.RRmay{background:var(--headerBackground);width:100%;box-shadow:rgba(0,0,0,0.2) 0px 3px 3px -2px,rgba(0,0,0,0.14) 0px 3px 4px 0px,rgba(0,0,0,0.12) 0px 1px 8px 0px;}
/* sc-component-id: Header__HeaderInner-ewwnf4-1 */
.fARCIn{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px;} .fARCIn .logo{width:200px;height:55px;} @media screen and (max-width:500px){.fARCIn .logo{margin:0 auto;}} .fARCIn .message-link{position:absolute;right:0;top:7px;display:block;width:34px;} .fARCIn .message-link:hover{top:5px;}
/* sc-component-id: Layout__Content-sc-2dvbv0-0 */
.jzKyDb{margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.jzKyDb{display:block;}} @media screen and (max-width:500px){.jzKyDb{margin-top:0;}}
/* sc-component-id: MainWrapper__IndexWrapper-fdnybq-0 */
.ghKhoM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.ghKhoM{display:block;}} @media screen and (max-width:500px){.ghKhoM{margin-top:0;}}
/* sc-component-id: MainWrapper__ContentsWrapper-fdnybq-1 */
.itpjOs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:calc(100% - 290px - 40px);margin-right:40px;} @media screen and (max-width:950px){.itpjOs{width:100%;}}
/* sc-component-id: CategoryLabel__Wrapper-m6lbf0-0 */
.ewFmUv .category-text{padding:0.3em 1em;display:inline-block;display:inline;padding:3px 6px;line-height:1.2;font-size:12px;border-radius:2px;font-weight:700;color:#fff;} @media screen and (max-width:950px){.ewFmUv .category-text{font-size:11px;padding:2.5px 6px;}}
/* sc-component-id: RelatedPosts__Wrapper-sc-1nrzwfn-0 */
.fFDafD{background:#f1f4f7;padding:2em 2.5em;} @media screen and (max-width:500px){.fFDafD{padding:30px 20px;}}
/* sc-component-id: RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 */
.gvYRzK .post-card-link{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1em;padding:15px;background:#fff;border-radius:5px;color:#313746;box-shadow:0 1px 2px rgba(0,0,0,0.1);} .gvYRzK .post-card-link:hover{background:#e0ebf1;} @media screen and (max-width:500px){.gvYRzK .post-card-link{padding:10px;}}
/* sc-component-id: RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 */
.hMlNHl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 2px 4px rgba(0,0,0,0.4);margin:0;width:80px;height:80px;background:#f1f4f7;border-radius:4px;font-size:50px;} .hMlNHl img{width:55px;height:55px;}
/* sc-component-id: RelatedPosts__PostCardContent-sc-1nrzwfn-3 */
.jNfPFJ{width:calc(100% - 80px);padding-left:15px;} .jNfPFJ h5{font-size:1.1em;font-weight:700;line-height:1.45;} .jNfPFJ time{display:block;margin-bottom:0.1em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;font-size:0.8em;color:#969fa7;} @media screen and (max-width:500px){.jNfPFJ{padding-left:15px;}.jNfPFJ h5{font-size:1em;}}
/* sc-component-id: TableOfContents__TableIndex-sc-1xzats2-0 */
.hAYtIK{position:-webkit-sticky;position:sticky;top:2em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;width:320px;padding:1.5em;background:none;border-radius:4px;} @media screen and (max-width:950px){.hAYtIK{position:relative;margin:2em 0;width:100%;}} @media screen and (max-width:500px){.hAYtIK{padding:1.3em 1em;}}
/* sc-component-id: TableOfContents__TableWrapper-sc-1xzats2-1 */
.gndSEd{display:block;width:100%;max-height:calc(100vh - 150px);word-break:break-word;color:black;overflow:auto;border-left:1.5px solid rgb(233,236,239);}
/* sc-component-id: TableOfContents__TableHeader-sc-1xzats2-2 */
.fYkEUy{display:block;text-align:left;font-size:17px;color:var(--bioColor);padding-left:15px;margin-bottom:15px;}
/* sc-component-id: TableOfContents__TableContents-sc-1xzats2-3 */
.gBhcRP{margin:0 10px;font-size:14px;overflow:hidden;-webkit-transition:all 0.125s ease-in 0s;transition:all 0.125s ease-in 0s;} .gBhcRP a{display:block;color:rgb(134,142,150);} .gBhcRP a:hover{color:var(--tableOfContentsFocusColor);} .gBhcRP ul{list-style:none;margin-left:10px;margin-bottom:0px;line-height:1.5rem;} .gBhcRP ul > li a[href='']{color:var(--tableOfContentsFocusColor);-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);}
/* sc-component-id: post__Content-sc-1em13mo-0 */
.chZKnq{position:relative;background:#fff;overflow:hidden;font-size:16px;} .chZKnq:before,.chZKnq:after{content:'';position:absolute;width:0;height:0;z-index:5;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;} .chZKnq:before{top:0;left:0;border-top:20px solid var(--bg);border-right:20px solid transparent;} .chZKnq:after{bottom:0;right:0;border-bottom:20px solid var(--bg);border-left:20px solid transparent;} @media screen and (max-width:500px){.chZKnq{margin:0 -20px;}.chZKnq:before,.chZKnq:after{content:none;}}
/* sc-component-id: post__HeroImage-sc-1em13mo-1 */
.lgloNz{position:relative;background:#313746;text-align:center;background-image:url("/static/pattern-00b88abde489053a0ab3b3e799db37b9.svg");background-repeat:repeat;background-size:400px;min-height:230px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .lgloNz .emoji{width:110px;height:110px;} @media screen and (max-width:500px){.lgloNz{min-height:190px;}}
/* sc-component-id: post__ContentMain-sc-1em13mo-2 */
.juBGvQ{padding:1.8em 2.5em;} @media screen and (max-width:500px){.juBGvQ{padding:30px 20px;}}
/* sc-component-id: post__PostTitle-sc-1em13mo-3 */
.fpGsDA{margin:0.1em 0 0.3em;font-size:1.8em;font-weight:700;line-height:1.5;} @media screen and (max-width:500px){.fpGsDA{font-size:25px;}}
/* sc-component-id: post__PostDate-sc-1em13mo-4 */
.dcRxDp{display:block;color:#969fa7;font-size:0.9em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}
/* sc-component-id: post__PostContent-sc-1em13mo-5 */
.iPJcKE{margin:1.5em 0 1em;line-height:1.9;} .iPJcKE .gatsby-highlight{margin:1.5em 0;} @media screen and (max-width:500px){.iPJcKE .gatsby-highlight{margin:1.5em -20px;}} .iPJcKE code[class*='language-'],.iPJcKE pre[class*='language-']{-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:Menlo,Monaco,'Courier New',monospace;color:#ccc;text-shadow:none;word-break:break-all;} .iPJcKE pre[class*='language-'],.iPJcKE:not(pre) > code[class*='language-']{background:#313746;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.5);} @media screen and (max-width:500px){.iPJcKE pre[class*='language-'],.iPJcKE:not(pre) > code[class*='language-']{border-radius:0;}} .iPJcKE pre[class*='language-']{padding:1.2em 1.2em;-webkit-overflow-scrolling:touch;position:relative;font-size:14.5px;line-height:1.7;overflow:auto;} .iPJcKE .gatsby-highlight pre[class*='language-'].line-numbers{padding-left:3.4em;} .iPJcKE pre[class*='language-'].line-numbers span.line-numbers-rows{padding:1.2em 0 1.2em 0.7em;background-color:hsla(0,0%,78.4%,0.15);border:none;} .iPJcKE .token.comment,.iPJcKE .token.block-comment,.iPJcKE .token.prolog,.iPJcKE .token.doctype,.iPJcKE .token.cdata{color:#999;} .iPJcKE .token.punctuation{color:#ccc;} .iPJcKE .token.tag,.iPJcKE .token.attr-name,.iPJcKE .token.namespace,.iPJcKE .token.deleted{color:#e2777a;} .iPJcKE .token.function-name{color:#6196cc;} .iPJcKE .token.boolean,.iPJcKE .token.number,.iPJcKE .token.function{color:#f08d49;} .iPJcKE .token.property,.iPJcKE .token.class-name,.iPJcKE .token.constant,.iPJcKE .token.symbol{color:#f8c555;} .iPJcKE .token.selector,.iPJcKE .token.important,.iPJcKE .token.atrule,.iPJcKE .token.keyword,.iPJcKE .token.builtin{color:#cc99cd;} .iPJcKE .token.string,.iPJcKE .token.char,.iPJcKE .token.attr-value,.iPJcKE .token.regex,.iPJcKE .token.variable{color:#7ec699;} .iPJcKE .token.operator,.iPJcKE .token.entity,.iPJcKE .token.url{color:#67cdcc;} .iPJcKE .token.important,.iPJcKE .token.bold{font-weight:bold;} .iPJcKE .token.italic{font-style:italic;} .iPJcKE .token.entity{cursor:help;} .iPJcKE .token.inserted{color:green;} .iPJcKE .gatsby-code-title{position:relative;margin:1.5em 0 -24px auto;background:#616161;color:#fff;font-size:12px;height:24px;padding:0 8px;line-height:24px;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-weight:500;border-radius:0 5px;display:table;z-index:2;} @media screen and (max-width:500px){.iPJcKE .gatsby-code-title{border-radius:0 0 0 5px;margin-right:-20px;}} .iPJcKE .gatsby-code-title + .gatsby-highlight{margin-top:0;} .iPJcKE p > code,.iPJcKE li > code{color:#ff3860 !important;background:#f9f1f3;padding:0.15em 0.4em;margin:0.2em;border-radius:4px;font-size:0.85em;word-break:break-all;white-space:pre-line;} .iPJcKE strong > code{font-family:inherit !important;} .iPJcKE a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .iPJcKE p{margin:0.5em 0;} .iPJcKE h1,.iPJcKE h2,.iPJcKE h3,.iPJcKE h4,.iPJcKE h5,.iPJcKE h6{margin:40px 0 10px;font-weight:700;line-height:1.5;} .iPJcKE h1{margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.55em;} .iPJcKE h1:before{position:absolute;top:0;left:0;content:"";display:inline-block;width:5px;height:100%;border-radius:5px;background:linear-gradient(0deg,#ffa649 0%,#ffa649 50%,#f7645b 50%,#f7645b 100%);} .iPJcKE h2{position:relative;margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.40em;} .iPJcKE h2:before{position:absolute;top:0;left:0;content:"";display:inline-block;width:5px;height:100%;border-radius:5px;background:linear-gradient(0deg,#ffa649 0%,#ffa649 50%,#f7645b 50%,#f7645b 100%);} .iPJcKE h3{margin:40px 0 12px;font-size:1.40em;} .iPJcKE h4{position:relative;padding-left:18px;font-size:1.2em;} .iPJcKE h4:before{position:absolute;top:.2em;left:0;content:"";display:inline-block;width:14px;height:19px;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuODrOOCpOODpOODvF8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzAgNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwIDQ1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0Y3NjQ1Qzt9Cgkuc3Qxe2ZpbGw6I0ZGQTc0ODt9Cjwvc3R5bGU+Cjx0aXRsZT5pY29uPC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4LjEsMzAuMWMwLDcuNS02LjEsMTMuNi0xMy42LDEzLjZTMC45LDM3LjcsMC45LDMwLjFTNywxNi41LDE0LjUsMTYuNVMyOC4xLDIyLjYsMjguMSwzMC4xeiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjguMSwxNS42YzAsNy41LTYuMSwxMy42LTEzLjYsMTMuNlMwLjksMjMuMSwwLjksMTUuNlM3LDIsMTQuNSwyUzI4LjEsOC4xLDI4LjEsMTUuNnoiLz4KPC9zdmc+Cg==");background-size:contain;background-repeat:no-repeat;} .iPJcKE ul,.iPJcKE ol{margin:1em 0;} .iPJcKE ul p,.iPJcKE ol p{margin:0;} .iPJcKE ul{padding-left:1.2em;} .iPJcKE ul li{margin:.4em 0;list-style:disc;} .iPJcKE ul ul,.iPJcKE ul ol{margin:0;} .iPJcKE ol{counter-reset:number;} .iPJcKE ol > li{list-style:none;list-style-position:inside;position:relative;padding:0 0 0 30px;margin:0.5em 0;} .iPJcKE ol > li:before{display:inline-block;position:absolute;left:0;top:0;width:20px;height:20px;margin:.4em 0;border-radius:25%;background:#5c9ee7;color:#fff;font-weight:700;font-size:14px;text-align:center;line-height:20px;content:counter(number);counter-increment:number;} .iPJcKE ol ul{margin:0;} .iPJcKE strong{font-weight:550;font-size:1.1em;} .iPJcKE em{font-style:italic;} .iPJcKE del{-webkit-text-decoration:line-through;text-decoration:line-through;} .iPJcKE hr{display:block;margin:2em 0;border:none;border-top:dotted 3px #e1eaf3;} .iPJcKE table{display:block;margin:1em 0;border-spacing:2px;border-collapse:separate;overflow:auto;-webkit-overflow-scrolling:touch;width:auto;font-size:.9em;line-height:1.4;} .iPJcKE table th{background-color:#313746;color:#FFF;padding:10px 12px;text-align:center;font-weight:700;} .iPJcKE table th[align="center"]{text-align:center;} .iPJcKE table th[align="right"]{text-align:right;} .iPJcKE table td{background-color:#f1f4f7;color:#313746;padding:10px 12px;} .iPJcKE table td code[class*='language-']{color:#313746;} .iPJcKE table thead tr th:first-child{border-radius:5px 0 0 0;} .iPJcKE table thead tr th:last-child{border-radius:0 5px 0 0;} .iPJcKE table tbody tr:last-child td:first-child{border-radius:0 0 0 5px;} .iPJcKE table tbody tr:last-child td:last-child{border-radius:0 0 5px 0;} .iPJcKE blockquote{margin:1em 0;padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5;} .iPJcKE .gatsby-resp-image-wrapper{margin:2em 0;box-shadow:1px 1px 20px lightgrey;border-radius:4px;overflow:hidden;} .iPJcKE .anchor-header{margin:2px 0 0 0;} .iPJcKE .custom-block{margin:1em 0;background:#f1f4f7;} .iPJcKE .custom-block-heading{font-weight:700;} .iPJcKE .custom-block-heading .emoji{width:1.2em !important;height:1.2em !important;vertical-align:-0.2em !important;} .iPJcKE .custom-block-body{font-size:0.92em;} .iPJcKE .custom-block-body > *:first-child{margin-top:0;} .iPJcKE .custom-block-body > *:last-child{margin-bottom:0;} .iPJcKE .custom-block-body h5{font-size:1.05em;margin:20px 0 5px;} .iPJcKE > *:first-child{margin-top:0;} .iPJcKE .custom-block.simple{padding:1em 1.2em;border-radius:5px;} .iPJcKE .custom-block.simple .custom-block-heading{font-size:1.1em;} .iPJcKE .custom-block.info,.iPJcKE .custom-block.alert,.iPJcKE .custom-block.notice{padding:0.7em 1em;border-left:solid 4px #20a8ea;border-radius:1px 3px 3px 1px;} .iPJcKE .custom-block.alert{border-left-color:#f7615f;background:#ffeff0;} .iPJcKE .custom-block.alert .custom-block-heading{color:#f7615f;} .iPJcKE .custom-block.notice{border-left-color:#ffa22b;background:#fff4df;} .iPJcKE .custom-block.notice .custom-block-heading{color:#ffa22b;} .iPJcKE .custom-block.image-small,.iPJcKE .custom-block.image-medium{background:#c0e2fb;padding:1.5em;text-align:center;border-radius:5px;} .iPJcKE .custom-block.image-small .gatsby-resp-image-wrapper,.iPJcKE .custom-block.image-medium .gatsby-resp-image-wrapper{margin:0;border:none;box-shadow:0 5px 15px rgba(0,0,0,0.15);} .iPJcKE .custom-block.image-small .gatsby-resp-image-wrapper{max-width:350px !important;border:none;} .iPJcKE .custom-block.image-medium .gatsby-resp-image-wrapper{max-width:450px !important;border:none;}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-69021907bbb3c5f6f9bc.js"/><link as="script" rel="preload" href="/framework-59a9ef51c55d9b62f7de.js"/><link as="script" rel="preload" href="/styles-09367947dddffb36886c.js"/><link as="script" rel="preload" href="/app-89429f537d9a1df97907.js"/><link as="script" rel="preload" href="/de71a805-ab927e1633c63597cfb4.js"/><link as="script" rel="preload" href="/53b27b57f60ee3e1ca57a66cde9add975dffb161-02229e3c19b685f22804.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-61975928013a32dc06b9.js"/><link as="fetch" rel="preload" href="/page-data/category/study/jpa-programming/chapter3-persistence-context/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="App" style="background-color:var(--bg);color:var(--textNormal);transition:color 0.2s ease-out, background 0.2s ease-out"><header class="Header__HeaderTag-ewwnf4-0 RRmay"><div class="ContentWrapper__IndexContent-sc-11a8f56-0 eYfJyt"><div class="Header__HeaderInner-ewwnf4-1 fARCIn"><a class="logo-link" href="/"><img class="logo" src="/static/logo-42e9962f0784e14369fff245074e7612.png" alt="Blausee 기술 블로그"/></a><div class="ColorModeToggle__ToggleButton-pbocc9-0 iRqtPU"><div style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:13px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:26px;width:54px;margin:0;position:relative;background:#d9dfe2;border-radius:13px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:26px;width:29px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-moon checkedIcon"><svg width="24" height="24" fill="#EFDC05"><rect width="24" height="24" fill="none" rx="0" ry="0"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M14.8102 3.2H13.8202C13.4902 3.2 13.2302 2.93 13.2302 2.6C13.2302 2.27 13.5002 2 13.8302 2H16.2602C16.5002 2 16.7202 2.15 16.8102 2.37C16.9002 2.59 16.8502 2.85 16.6802 3.02L15.2702 4.43H16.2602C16.5902 4.43 16.8602 4.7 16.8602 5.03C16.8602 5.36 16.5902 5.63 16.2602 5.63H13.8202C13.5802 5.63 13.3602 5.48 13.2702 5.26C13.1802 5.04 13.2302 4.78 13.4002 4.61L14.8102 3.2ZM20.1401 11.0101H21.1301C21.4601 11.0101 21.7401 11.2801 21.7401 11.6101C21.7401 11.9401 21.4701 12.2101 21.1401 12.2101H18.7001C18.4601 12.2101 18.2401 12.0601 18.1501 11.8401C18.0601 11.6201 18.1101 11.3601 18.2801 11.1901L19.6901 9.78008H18.7001C18.3701 9.78008 18.1001 9.51008 18.1001 9.18008C18.1001 8.85008 18.3701 8.58008 18.7001 8.58008H21.1301C21.3701 8.58008 21.5901 8.73008 21.6801 8.95008C21.7701 9.17008 21.7201 9.43008 21.5501 9.60008L20.1401 11.0101ZM11.0302 9.8499H12.8502L10.7002 11.9999C10.5302 12.1699 10.4802 12.4299 10.5702 12.6499C10.6602 12.8699 10.8802 13.0199 11.1202 13.0199H14.2902C14.6202 13.0199 14.8902 12.7499 14.8902 12.4199C14.8902 12.0899 14.6202 11.8199 14.2902 11.8199H12.5602L14.7102 9.6699C14.8802 9.4999 14.9302 9.2399 14.8402 9.0199C14.7502 8.7999 14.5302 8.6499 14.2902 8.6499H11.0202C10.6902 8.6499 10.4202 8.9199 10.4202 9.2499C10.4202 9.5799 10.7002 9.8499 11.0302 9.8499ZM14.5501 16.89C15.6601 16.89 16.7201 16.66 17.7101 16.19C17.9401 16.08 18.2101 16.13 18.3801 16.3C18.5601 16.48 18.6101 16.75 18.5001 16.98C17.0901 20.05 13.9901 22.03 10.6001 22.03C5.79013 22.03 1.88013 18.12 1.88013 13.31C1.88013 9.94004 3.87013 6.84004 6.93013 5.40004C7.16013 5.29004 7.43012 5.34004 7.61012 5.52004C7.79012 5.70004 7.84013 5.97004 7.73013 6.20004C7.27013 7.19004 7.03012 8.26004 7.03012 9.38004C7.03012 13.52 10.4001 16.89 14.5501 16.89ZM3.09013 13.31C3.09013 17.46 6.46012 20.83 10.6101 20.83C12.9901 20.83 15.2001 19.7 16.6001 17.85C15.9401 18.01 15.2501 18.09 14.5501 18.09C9.74013 18.09 5.83012 14.18 5.83012 9.38004C5.83012 8.68004 5.91013 7.99004 6.07013 7.32004C4.22013 8.73004 3.09013 10.94 3.09013 13.31Z"></path></svg></div></div><div style="height:26px;width:29px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-sun uncheckedIcon"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.2" baseProfile="tiny" viewBox="0 0 24 24" size="24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.934l1-2.934c.072-.213.078-.452 0-.682-.188-.553-.789-.848-1.341-.659-.553.189-.847.788-.659 1.341l1 2.934zM4 11c-.213-.072-.452-.078-.682 0-.553.188-.848.789-.659 1.341.189.553.788.847 1.341.659l2.934-1-2.934-1zM12 17.066l-1 2.934c-.072.213-.078.452 0 .682.188.553.789.848 1.341.659.553-.189.847-.788.659-1.341l-1-2.934zM21.341 11.657c-.188-.553-.788-.848-1.341-.659l-2.934 1 2.934 1c.213.072.452.078.682 0 .552-.188.847-.789.659-1.341zM5.636 7.05l2.781 1.367-1.367-2.781c-.1-.202-.265-.375-.482-.482-.524-.258-1.157-.042-1.415.482-.257.523-.041 1.157.483 1.414zM5.153 17.432c-.257.523-.041 1.156.482 1.414.523.257 1.157.041 1.414-.482l1.367-2.781-2.781 1.367c-.201.099-.374.263-.482.482zM18.363 16.949l-2.781-1.367 1.367 2.781c.1.202.264.375.482.482.523.257 1.156.041 1.414-.482s.042-1.157-.482-1.414zM18.844 6.566c.258-.524.042-1.157-.481-1.415-.523-.257-1.157-.041-1.414.482l-1.369 2.783 2.782-1.368c.202-.1.375-.264.482-.482zM12 7.5c-2.481 0-4.5 2.019-4.5 4.5s2.019 4.5 4.5 4.5 4.5-2.019 4.5-4.5-2.019-4.5-4.5-4.5z"></path></svg></div></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(0px);top:0;outline:0;box-shadow:0px 1px 5px rgba(0, 0, 0, 0.6);border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px" id="normal-switch"/></div></div></div></div></header><div class="ContentWrapper__IndexContent-sc-11a8f56-0 eYfJyt"><div class="Layout__Content-sc-2dvbv0-0 jzKyDb"><main><div class="MainWrapper__IndexWrapper-fdnybq-0 ghKhoM"><div class="MainWrapper__ContentsWrapper-fdnybq-1 itpjOs"><section class="post__Content-sc-1em13mo-0 chZKnq"><p class="post__HeroImage-sc-1em13mo-1 lgloNz"><img class="emoji" draggable="false" alt="⏰" src="https://twemoji.maxcdn.com/v/12.1.6/svg/23f0.svg"/></p><div class="post__ContentMain-sc-1em13mo-2 juBGvQ"><time class="post__PostDate-sc-1em13mo-4 dcRxDp">2020.10.18</time><h1 class="post__PostTitle-sc-1em13mo-3 fpGsDA">[JPA 프로그래밍] 3. 영속성 관리</h1><div class="CategoryLabel__Wrapper-m6lbf0-0 ewFmUv"><a class="category-text" style="background:#C0D545" href="/category/study">스터디</a></div><div class="post__PostContent-sc-1em13mo-5 iPJcKE"><h2 id="1-영속성-컨텍스트란" style="position:relative;"><a href="#1-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%9E%80" aria-label="1 영속성 컨텍스트란 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 영속성 컨텍스트란?</h2>
<p>JPA를 이해하는데 가장 중요한 용어는 <code class="language-text">영속성 컨텍스트(persistence context)</code>입니다.</p>
<p>해석하자면, ‘엔티티를 영구 저장하는 환경’이라는 뜻입니다.</p>
<p>논리적인 개념에 가까우며 엔티티 매니저를 생성할 때 하나 만들어집니다.</p>
<p>엔티티 매니저를 통해 영속성 컨텍스트에 접근하고 관리할 수 있습니다.</p>
<h2 id="2-엔티티의-생명주기" style="position:relative;"><a href="#2-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0" aria-label="2 엔티티의 생명주기 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 엔티티의 생명주기</h2>
<p>엔티티에는 4가지 상태가 존재합니다.</p>
<table>
<thead>
<tr>
<th align="left">상태</th>
<th align="left">내용</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">비영속(new/transient)</td>
<td align="left">영속성 컨텍스트와 전혀 관계가 없는 상태</td>
</tr>
<tr>
<td align="left">영속(merged)</td>
<td align="left">영속성 컨텍스트에 저장된 상태</td>
</tr>
<tr>
<td align="left">준영속(detached)</td>
<td align="left">영속성 컨텍스트에서 저장되었다가 분리된 상태</td>
</tr>
<tr>
<td align="left">삭제(removed)</td>
<td align="left">삭제된 상태</td>
</tr>
</tbody>
</table>
<h4 id="비영속" style="position:relative;"><a href="#%EB%B9%84%EC%98%81%EC%86%8D" aria-label="비영속 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>비영속</h4>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token comment">// 객체를 생성한 상태(비영속)</span>
<span class="token class-name">Member</span> member <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
member<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
member<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"회원1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<h4 id="영속" style="position:relative;"><a href="#%EC%98%81%EC%86%8D" aria-label="영속 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>영속</h4>
<p>영속상태 = 영속성 컨텍스트에 의해 관리된다는 뜻입니다.</p>
<p><code class="language-text">em.find()</code>나 <code class="language-text">JPQL</code>를 사용해서 조회한 엔티티도 영속 상태 !</p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java">em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 객체를 영속성 컨텍스트에 저장</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h4 id="준영속" style="position:relative;"><a href="#%EC%A4%80%EC%98%81%EC%86%8D" aria-label="준영속 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>준영속</h4>
<p>영속성 컨텍스트가 관리하던 영속 상태의 엔티티를 영속성 컨텍스트가 관리하지 않으면 ‘준영속 상태’입니다.</p>
<ul>
<li><code class="language-text">em.detach()</code> 호출로 준영속 상태 명시적 호출</li>
<li><code class="language-text">em.close()</code>를 호출해서 영속성 컨텍스트를 닫음</li>
<li><code class="language-text">em.clear()</code>로 영속성 컨텍스트 초기화</li>
</ul>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java">em<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h4 id="삭제" style="position:relative;"><a href="#%EC%82%AD%EC%A0%9C" aria-label="삭제 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>삭제</h4>
<p>엔티티를 영속성 컨텍스트와 데이터베이스에서 삭제 !</p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java">em<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h2 id="3-영속성-컨텍스트의-특징" style="position:relative;"><a href="#3-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%ED%8A%B9%EC%A7%95" aria-label="3 영속성 컨텍스트의 특징 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 영속성 컨텍스트의 특징</h2>
<ol>
<li>
<p>영속성 컨텍스트와 식별자 값</p>
<ul>
<li>엔티티를 식별자 값(@id로 테이블의 기본 키와 매핑한 값)으로 구분</li>
<li>영속 상태는 식별자 값이 반드시 있어야 함 -> 식별자 값이 없으면 예외 발생</li>
</ul>
</li>
<li>
<p>영속성 컨텍스트와 데이터베이스 저장</p>
<ul>
<li>JPA는 보통 트랜잭션을 커밋하는 순간 영속성 컨텍스트에 새로 저장된 엔티티를 데이터베이스에 반영하는데 이것을 <code class="language-text">플러시(flush)</code>라 합니다.</li>
</ul>
</li>
<li>
<p>영속성 컨텍스트가 엔티티를 관리하는 것의 장점 5가지</p>
<ul>
<li>1차 캐시</li>
<li>동일성 보장</li>
<li>트랜잭션을 지원하는 쓰기 지연</li>
<li>변경 감지</li>
<li>지연 로딩</li>
</ul>
</li>
</ol>
<h4 id="1-엔티티-조회" style="position:relative;"><a href="#1-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%A1%B0%ED%9A%8C" aria-label="1 엔티티 조회 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 엔티티 조회</h4>
<ul>
<li>
<p>영속성 컨텍스트는 내부에 캐시를 가지고 있음</p>
<ul>
<li><code class="language-text">1차 캐시</code></li>
</ul>
</li>
<li>영속 상태의 엔티티는 모두 이곳에 저장 !</li>
</ul>
<p><strong>엔티티 조회</strong></p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Member</span> member <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p><code class="language-text">em.find()</code> 호출되면 <code class="language-text">1차 캐시</code>에서 엔티티 조회 ! -> 엔티티가 1차 캐시에 없으면 <code class="language-text">데이터베이스</code> 조회</p>
<p><strong>1차 캐시에서 엔티티 조회</strong></p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Member</span> member <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
member<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
member<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"회원1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1차 캐시에 저장됨</span>
em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1차 캐시에서 조회</span>
<span class="token class-name">Member</span> findMember <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0f7fe184bba1ab6f5649ea355d383e53/bce1e/JPA_3_1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 65.42553191489361%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC0UlEQVQ4yy1T2Y7TQBD0ByGEhARiEYgNm9OOj8R34ttOvLlI4j20gT1Ybq0EPPC/Rc3AQ2vG3Z6aquoepXViod210ek56A996KMYIzeDF1Zw/ILfEUw7gRvOEUSn8KP63zqtEcYLriJfI6u2SIoNFAHUG3hQ9RBDcwpjHKOsG5TzPaJ0jcvDJzQXt7i7f8Ddxwfcf/4p91++/sL17Xcc3n/G+eUd5otzHK6/QemrPgYCzIpg2RnZFchnO8nI9mssNu8JfobV8hLb9RX2uxvsttfYvrtCXe+xWp2jJDsnqLBtbqB0+y4Gw4ARQjOEvBzFbE+5QvKMcoSshVydYCYvFOvYqyh/wYv5H0Os6+2BkvuOBNPNmCwTSs7oRwP7/+FQHApqgswJUnBfyVxW7REXW+ml45ewWVuRtdJTA1gEsXmj6eQYjghIhgJQH6XMFbDckuClrB2uv+PLt9/48fAHxbyB5ZSSseWkmJ02UNpdD5qZYuRUkp1hFwQ8I0gF1UwwYBg2626KKFshLVaIswVt2SAr1/AnJZmncjKK+Q7K62MD7X4A1UjpYQKNLMJkg+E4R0+P0NdTCdhRx4jzU3QHI7zt6uhpNmWvKDdBu2eQJZtZvYOiah48NiCc1DLGXomU/giJokF+vME03/GSFaJ8gwlnT3jZXHzEzc0PNGe3mCYLWpaT/ZqAqgvXzTHlmLhOBpO+pSXHwCulr1HeUN45Ys5kVZ/JCchY3zV3+HD1FQ1HJWBjhtaUg15DefaijdctE8ftMaW7OObL8djJoRnJZoXREgUZ+xNhfCbztifYZ/Q5lznxknqqRxI5lDctHcvTPfabSyTpUhbG7FicLhhLJGyEeJKtjoWT7ogeuv+eKBkZfJaaEeKkM8LzFx1ofCDKo8dHePmqj9ZbA0cve3jy9I3c6+aEbCYweFAzQ6gEETE0JqxNyT6RNfGfyA80H8Gkwl91KR2bl+9frQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="1차 캐시에서 조회"
        title="1차 캐시에서 조회"
        src="/static/0f7fe184bba1ab6f5649ea355d383e53/1d69c/JPA_3_1.png"
        srcset="/static/0f7fe184bba1ab6f5649ea355d383e53/4dcb9/JPA_3_1.png 188w,
/static/0f7fe184bba1ab6f5649ea355d383e53/5ff7e/JPA_3_1.png 375w,
/static/0f7fe184bba1ab6f5649ea355d383e53/1d69c/JPA_3_1.png 750w,
/static/0f7fe184bba1ab6f5649ea355d383e53/78797/JPA_3_1.png 1125w,
/static/0f7fe184bba1ab6f5649ea355d383e53/aa440/JPA_3_1.png 1500w,
/static/0f7fe184bba1ab6f5649ea355d383e53/bce1e/JPA_3_1.png 1696w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><strong>데이터베이스에서 엔티티 조회</strong></p>
<ul>
<li>엔티티가 1차 캐시에 없으면 엔티티 매니저는 데이터베이스를 조회해서 엔티티를 생성함</li>
<li>1차 캐시에 저장한 후에 영속 상태의 엔티티를 반환함</li>
</ul>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c652a5e3badaeab85111510cf0342d92/c6720/JPA_3_2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.36170212765958%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC50lEQVQ4yzVSa1PaUBTMT+n0MX1ba9U6iCgIBgIk5MEjIQmvkBCQojxEbW07rdaZfmj7j7eb2+mHMyfJvdmzu2elXF5HQbYgKw0Uy03o9R56wQz94ZnoXm+C3nCGcHyB0ekloskKw3iJiO91ewjbi+H3p2i2I9SsLqQErFRpoaK1oRo+Gk6IYDTHYv0Nnz7/xM3HH7i65POne9x9/4W72998vsP1x1uChGi5Eboc7HYmMBp9SAlDpWpDUR2Cemg6I3T6H1Aze2i1x2j7E1Euy3HJpjuF3R4hJEvbGwnQ/92oD/4BFstkqLoEdWHZITqDM6hml2wjOARqOjHlhYJBvTXkt1PE02uyG8FqBYJl3Q5gNgMCnhio1jyYjQCa1eeFEL4A7ENjWXaE9fUdbu//4Hz5hSwCsokxCBdioNUaECi52/knOZs3yLBNQwN62EWdkv1gDtXqEdRHk9O93piLmCOIzgky4OI6QrJFtqrhEcxHKbGNJR3mNBSKTVRqBNC7MMmw4U6gcEknikE2A2RPNORknQw8+hsT0BMbV/UOLRjQkiH/T+7XuWVK7jEas+klfH/MwwiD0RINO2E2Qzy7YWwWQno/OMNqccMN32O++i4kh/ECQ6bCoRLD6kBKpUtQGJsWTa+ojE6NMhkdTfe55ZgRWrOPUObCgnCO9cVXrBip5fqWWT0n2y4jM8ZydQOX25bevjvC1k4OuykZ6cMq5Vsi4LLSZEROMZ1dCe9sj8wZ8PnZNWKGO5osCZQsZ4YafTQZ6qrmQNp5n0el2oKuuygRpCCbMGm6wTop1ZE+qmAvLSOVLuK9GFpBJlslYwe5go4Sh+/uFVh5bO9mIb3e3IeimKhpNi+WxWGZFsgJWEYhQBkHBE16hj1zVBWVnG/vHiNR+G4ny36A15spSA8fb+DBow08eb6Fpy+28WojhdR+UVQCcJRTkT3WkM1rOCajvGyIOuCAN1sZAh1i4+0+Xr3Zw7OX2/gLHUEOGzrXiDUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="데이터베이스에서 조회"
        title="데이터베이스에서 조회"
        src="/static/c652a5e3badaeab85111510cf0342d92/1d69c/JPA_3_2.png"
        srcset="/static/c652a5e3badaeab85111510cf0342d92/4dcb9/JPA_3_2.png 188w,
/static/c652a5e3badaeab85111510cf0342d92/5ff7e/JPA_3_2.png 375w,
/static/c652a5e3badaeab85111510cf0342d92/1d69c/JPA_3_2.png 750w,
/static/c652a5e3badaeab85111510cf0342d92/78797/JPA_3_2.png 1125w,
/static/c652a5e3badaeab85111510cf0342d92/aa440/JPA_3_2.png 1500w,
/static/c652a5e3badaeab85111510cf0342d92/c6720/JPA_3_2.png 1922w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4 id="2-엔티티-등록" style="position:relative;"><a href="#2-%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%93%B1%EB%A1%9D" aria-label="2 엔티티 등록 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 엔티티 등록</h4>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">EntityManager</span> em <span class="token operator">=</span> emf<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">EntityTransaction</span> transaction <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

transaction<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 트랜잭션 시작</span>

em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>memberA<span class="token punctuation">)</span><span class="token punctuation">;</span>
em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>memberB<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 여기까지 INSERT SQL을 데이터베이스에 보내지 않는다.</span>

transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 트랜잭션 커밋</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<ul>
<li>엔티티 매니저는 트랜잭션을 커밋하기 직전까지 데이터베이스의 엔티티를 저장하지 않음</li>
<li>내부 쿼리 저장소에 INSERT SQL을 차곡차곡 모음</li>
<li>트랜잭션 커밋할 때 모아둔 SQL 쿼리를 데이터베이스에 보냄</li>
<li>트랜잭션을 지원하는 <code class="language-text">쓰기 지연</code></li>
</ul>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/df8faa1a39b4d2477bc0a495b71ad191/1d7f7/JPA_3_3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 67.5531914893617%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADM0lEQVQ4yy1T23LaVhTVv7STjhsnjo1xwAZsDNiIOxIIIQl0QeIibo7B2Maxk0nHaTvT97bT6Rf0R9q+9JNWl07ysEf7HJ29ztp7rSPlLxSUqwaqdQs1pYdm24Ha8dDUXDRatthr6T6Mfiii585gewv0vTksO/y6P2HNgGf7kJSWgxYBom/HCLC+/Yj3Tz/i+Ydf8P7hM25unnB/9wmPjz/hw4efMV1sBVjPmWIUrmEPFnD8JWuHaKgOpEqN7BoWihUdtWYfZn+KPln07BmG4w2W149Ybz7hbvvM+IwV81G4gRtcYTLbCHZRtLsBAV1I5WoXlbqJEtsuVU2U63226qFUs+ANrwm+hDtYYvlui/FkhcXynvFAZldYvHtAxxwxhuxyAFULIEXsGorNcAS7wWgFl0CWM8d4esvDYyj2NTR3Bd1bwwxuYY22MNlBOL+DRmaK5onZtzo+JLnShVwxUWk4/OGjbU7gjW9gugt0rJCCsJXbP6D+9h+s3//B+M+/of/6L4znvzAn2wgsEk7+2qlkezMyo1K9LzPzJxu0jQkuqz2Umw40M6SacziTLexgJS4Lr57QG90JlRW6oa72Oa4uzukYSaeyKjctIcIaPltu6UMUZIqkeGS8QFXxqe49tg/PwgFesIZhTcWI6qot3KF1BwTVIUU+zGSryBVaKJZ1dDgThz7TjRFVGwh/RYd100fXCggW+XAGzfDh+guS8aj6CuHsBnK5AymbqyOVKSN1WkG2QJNzphXeFM1WaXso1zTaieuqinRWpr1aBI5MrItLciRUa5j0sY3zfANS8uQSh0fnODjM4ihRYJ7DQTyLeCKP0/MaQflamhStbiDLAo/slvMNTGuEerOH5EkR8bd5HCXzok6Kxc+w+zqJl6+S2NtPYe9Nht8M9mNnAjx30aSlLMHiOC3DMAMs2F6da7msCRL7h6w5OMHuXpKAXETJ96+OuHlMsDRivClinTi+QOFSRanSERHNuxm9bUaJYMVSm52dsj6Bnd04XuwcQNrZiSEWS5FRipTTbDWLt6QfgaUyMtKnnG+mJPLM2Zf8hHGcKpLxBV6+ThAohm+/e4NvXuzhf/TPNLTaT8uZAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="엔티티 등록"
        title="엔티티 등록"
        src="/static/df8faa1a39b4d2477bc0a495b71ad191/1d69c/JPA_3_3.png"
        srcset="/static/df8faa1a39b4d2477bc0a495b71ad191/4dcb9/JPA_3_3.png 188w,
/static/df8faa1a39b4d2477bc0a495b71ad191/5ff7e/JPA_3_3.png 375w,
/static/df8faa1a39b4d2477bc0a495b71ad191/1d69c/JPA_3_3.png 750w,
/static/df8faa1a39b4d2477bc0a495b71ad191/78797/JPA_3_3.png 1125w,
/static/df8faa1a39b4d2477bc0a495b71ad191/aa440/JPA_3_3.png 1500w,
/static/df8faa1a39b4d2477bc0a495b71ad191/1d7f7/JPA_3_3.png 2038w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><strong>트랜잭션 커밋시 플러시, 동기화 동작</strong></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3c68e6ae05da7023236cda1cba9090d4/26162/JPA_3_4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.08510638297872%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADNElEQVQ4yx1T2W7jRhDkt2ycNXzLlo/VfdmyTV2kRImUeIrUQV2WtHa8SdZeRw6CRU4gTwGCAPmNPOUlH1ap4UNjiOnp6qquppQvNnBZbkGuGqgpFpSWi2a7D0XzUG/aqKkWWnoAw5owQpjuFLY3j741I0DPmTImfOOj0XQgla6akGtdmLzs2SG++voVHz99xub1Fzx9+hEPjy88P+P55Sdsvv8Vi9VHTBYf4AV3BBzA7s/hDVbo9EYRCUkwrKs2L4aoNiz0h2vMWDCbPGK1esZy+S0e7l+wXj/hnqfj3cHpL+AGi6imS6aCZbs7pLo+pFyhTiATne6ITE1Y3oLJEMH4HvePG6wE2MN3lDqLpNnMB6OHKC8Y6uYIujWGpg/Q6gwhFS5Vandhu3Oo7YCFczSZVDsBC4YEH6NtjNBg9649jQC9YE2pdwTwCeSj2fGgUq4AlTL5OplZnOGCJnhwB2vo9gxKZ4AaQaoM0cjgnResoPfGnPUErr9Ei6o0MTsCy41eZKDU1FyYUecl3R1EhYYzR8eie+4CJu9tfw1n8J5NpxFrn037s2fYv/2D8I9/MfrzPyjOEoViDZIsd6DSbktI1Xwa5LKbQ8d8uk1nf/gd07snVNU+GbgR23D2DabrDUavf2O4+Qv1xc9ok8RlWYF0nigjR6cVyi1etWhQD5W6Dr3r06iALgqJQ7J3mOtGc3I5w8nsA8bBFFbPx2Q0g274yJcIGD8rIp2rEKQHYdC1rKFUrnEFTGQLFX43aIwLw+zjpqKhyuUXCz0Yr+FxBw26LNaurphIZyuQdvcTOD0voVBq4OziEmKNbisdyncIoKNCxq4bwnVCVPgDiHfir7plLpG64fsaMiSUycnEKUL6cjuOw1gKycw19g4TuEhcIZuv4pazFY9LZRVhSImT95xRE++S19F9OivjhOpOTguIxbM4iCWxf5SA9GbrENs7p0hly4if56JONbLS2h6Z6JDJpCtmyahGY1FwI7eRTN8QJI3YSYZnAjv7Z3i7Eyfgmz18sXWAvYNzdkrhmN2O4zlGPmL7LlnGKUch5IjvROo6iqPjDGsusMvY3o1jazuGrbdH+B9mdzC99xTq2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="트랜잭션 커밋시"
        title="트랜잭션 커밋시"
        src="/static/3c68e6ae05da7023236cda1cba9090d4/1d69c/JPA_3_4.png"
        srcset="/static/3c68e6ae05da7023236cda1cba9090d4/4dcb9/JPA_3_4.png 188w,
/static/3c68e6ae05da7023236cda1cba9090d4/5ff7e/JPA_3_4.png 375w,
/static/3c68e6ae05da7023236cda1cba9090d4/1d69c/JPA_3_4.png 750w,
/static/3c68e6ae05da7023236cda1cba9090d4/78797/JPA_3_4.png 1125w,
/static/3c68e6ae05da7023236cda1cba9090d4/aa440/JPA_3_4.png 1500w,
/static/3c68e6ae05da7023236cda1cba9090d4/26162/JPA_3_4.png 2020w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4 id="3-엔티티-수정" style="position:relative;"><a href="#3-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%88%98%EC%A0%95" aria-label="3 엔티티 수정 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 엔티티 수정</h4>
<ul>
<li>JPA는 엔티티를 수정할 때는 단순히 엔티티를 조회해서 원하는 데이터를 변경하면 OK</li>
<li><code class="language-text">update()</code>라는 메소드는 존재하지 않음</li>
<li>
<p><code class="language-text">변경 감지</code> 기능을 사용해서 데이타베이스에 자동 반영</p>
<ul>
<li>플러시 시점에 스냅샷과 엔티티를 비교해서 <code class="language-text">변경 감지</code>함</li>
</ul>
</li>
</ul>
<p><strong>업데이트 기본 전략</strong></p>
<p>JPA의 업데이트 기본 전략은 모든 필드를 업데이트함 !</p>
<ul>
<li>모든 필드를 사용하면 수정 쿼리가 항상 같음.</li>
<li>동일한 쿼리를 보내면 데이터베이스는 이전에 파싱된 쿼리는 재사용.</li>
</ul>
<h4 id="4-엔티티-삭제" style="position:relative;"><a href="#4-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%82%AD%EC%A0%9C" aria-label="4 엔티티 삭제 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 엔티티 삭제</h4>
<p>엔티티를 삭제하려면 먼저 삭제 대상 엔티티를 조회해야 한다.</p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Member</span> memberA <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 삭제 대상 엔티티 조회</span>
em<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>memberA<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 엔티티 삭제</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<ul>
<li>엔티티를 즉시 삭제하는 것이 아님</li>
<li>삭제 쿼리를 <code class="language-text">쓰기 지연</code> SQL 저장소에 등록</li>
<li><code class="language-text">em.remove(memberA)</code>를 호출하는 순간 영속성 컨텍스트에서 제거</li>
</ul></div></div><aside><div class="RelatedPosts__Wrapper-sc-1nrzwfn-0 fFDafD"><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/study/jpa-programming/chapter7-persistence-context-and-jpql/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="📦" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f4e6.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[JPA 프로그래밍] 7. 영속성 컨텍스트와 JPQL</h5><time>2020.11.11</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/study/jpa-programming/chapter6-object-oriented-query-language/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="📝" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f4dd.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[JPA 프로그래밍] 6. 객체지향 쿼리 언어</h5><time>2020.11.04</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/study/jpa-programming/chapter5-relationship-mapping/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="🤼‍♂️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f93c-200d-2642-fe0f.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[JPA 프로그래밍] 5. 연관 관계 매핑</h5><time>2020.10.27</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/study/jpa-programming/chapter4-entity-mapping/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="⛳️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/26f3.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[JPA 프로그래밍] 4. 엔티티 매핑</h5><time>2020.10.22</time></div></a></div></div><div></div></aside></section></div><div class="TableOfContents__TableIndex-sc-1xzats2-0 hAYtIK"><div class="TableOfContents__TableWrapper-sc-1xzats2-1 gndSEd table-of-contents"><h1 class="TableOfContents__TableHeader-sc-1xzats2-2 fYkEUy">🔖 Catalog</h1><div class="TableOfContents__TableContents-sc-1xzats2-3 gBhcRP"><ul>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#1-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%9E%80">1. 영속성 컨텍스트란?</a></li>
<li>
<p><a href="/category/study/jpa-programming/chapter3-persistence-context/#2-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0">2. 엔티티의 생명주기</a></p>
<ul>
<li>
<ul>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#%EB%B9%84%EC%98%81%EC%86%8D">비영속</a></li>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#%EC%98%81%EC%86%8D">영속</a></li>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#%EC%A4%80%EC%98%81%EC%86%8D">준영속</a></li>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#%EC%82%AD%EC%A0%9C">삭제</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="/category/study/jpa-programming/chapter3-persistence-context/#3-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%ED%8A%B9%EC%A7%95">3. 영속성 컨텍스트의 특징</a></p>
<ul>
<li>
<ul>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#1-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%A1%B0%ED%9A%8C">1. 엔티티 조회</a></li>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#2-%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%93%B1%EB%A1%9D">2. 엔티티 등록</a></li>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#3-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%88%98%EC%A0%95">3. 엔티티 수정</a></li>
<li><a href="/category/study/jpa-programming/chapter3-persistence-context/#4-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%82%AD%EC%A0%9C">4. 엔티티 삭제</a></li>
</ul>
</li>
</ul>
</li>
</ul></div></div></div></div></main></div></div><footer class="Footer__FooterContent-zn4blm-0 qFAAr"><div class="ContentWrapper__IndexContent-sc-11a8f56-0 eYfJyt"><div class="Footer__FooterInner-zn4blm-1 gQCnFr"><div>© <!-- -->2020<!-- -->, Blausee. All rights reserved.</div></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'none', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/category/study/jpa-programming/chapter3-persistence-context/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-89429f537d9a1df97907.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-71ad33effa27f873a1fc.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-aaabd06a16a990d9871a.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-758f05eb9c7e12bdd4a0.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-8dab18d4fe118a7a95b5.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-61975928013a32dc06b9.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-61975928013a32dc06b9.js" async=""></script><script src="/53b27b57f60ee3e1ca57a66cde9add975dffb161-02229e3c19b685f22804.js" async=""></script><script src="/de71a805-ab927e1633c63597cfb4.js" async=""></script><script src="/app-89429f537d9a1df97907.js" async=""></script><script src="/styles-09367947dddffb36886c.js" async=""></script><script src="/framework-59a9ef51c55d9b62f7de.js" async=""></script><script src="/webpack-runtime-69021907bbb3c5f6f9bc.js" async=""></script></body></html>