<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1cfadd536e0ed4ee026c.css">pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.23.3"/><link rel="icon" href="/favicon-32x32.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#0c9ee4"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=83455313757f7d5558ecbb4d2c6744cf"/><style type="text/css">
    .anchor-header.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor-header.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor-header svg,
    h2 .anchor-header svg,
    h3 .anchor-header svg,
    h4 .anchor-header svg,
    h5 .anchor-header svg,
    h6 .anchor-header svg {
      visibility: hidden;
    }
    h1:hover .anchor-header svg,
    h2:hover .anchor-header svg,
    h3:hover .anchor-header svg,
    h4:hover .anchor-header svg,
    h5:hover .anchor-header svg,
    h6:hover .anchor-header svg,
    h1 .anchor-header:focus svg,
    h2 .anchor-header:focus svg,
    h3 .anchor-header:focus svg,
    h4 .anchor-header:focus svg,
    h5 .anchor-header:focus svg,
    h6 .anchor-header:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Spring JPA(ORM)의 N+1 쿼리 문제 해결 | Blausee 기술 블로그</title><link data-react-helmet="true" rel="canonical" href="https://wwlee94.github.io/category/blog/spring-jpa-n+1-query/"/><meta data-react-helmet="true" name="description" content="Spring JPA N+1 쿼리 문제에 대해서"/><meta data-react-helmet="true" property="og:title" content="Spring JPA(ORM)의 N+1 쿼리 문제 해결"/><meta data-react-helmet="true" property="og:description" content="Spring JPA N+1 쿼리 문제에 대해서"/><meta data-react-helmet="true" property="og:image" content="https://wwlee94.github.io/images/ogp.png"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="google-site-verification" content="88lff6Lu9mvm83qKi5gCz6QvnlyJzZnPjPQo7E7PdOw"/><meta data-react-helmet="true" name="naver-site-verification" content="0d943f89faeb80f3af0c50cf57e4d269c64e695b"/><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","headline":"Spring JPA(ORM)의 N+1 쿼리 문제 해결","image":"https://wwlee94.github.io/images/ogp.png","editor":"wwlee94","datePublished":"2020-06-29","dateCreated":"2020-06-29","dateModified":"2020-06-29","description":"Spring JPA N+1 쿼리 문제에 대해서","author":{"@type":"Person","name":"wwlee94","image":"https://wwlee94.github.io/images/avatar.png"},"publisher":{"@type":"Organization","name":"wwlee94","logo":{"@type":"ImageObject","url":"https://wwlee94.github.io/images/avatar.png","width":150,"height":150}}}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://wwlee94.github.io","name":"HOME"}},{"@type":"ListItem","position":2,"item":{"@id":"https://wwlee94.github.io/blog","name":"블로그"}},{"@type":"ListItem","position":3,"item":{"name":"Spring JPA(ORM)의 N+1 쿼리 문제 해결"}}]}</script><style data-styled="RRmay bKvkBm fARCIn iRqtPU jzKyDb ghKhoM itpjOs chZKnq lgloNz juBGvQ dcRxDp fpGsDA ewFmUv dbnIIr fFDafD gvYRzK COWRd jNfPFJ jkbcXl eUzVwc guDYpi bcrmFE qFAAr gQCnFr" data-styled-version="4.4.1">
/* sc-component-id: sc-global-2971809368 */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-tap-highlight-color:rgba(0,0,0,0);} html,body{height:100%;} body{--bg:#f5f5f5;--textNormal:#21242d;--headerBackground:#ffffff;--bioBackground:#ffffff;--bioColor:rgba(0,0,0,0.87);--bioHighlight:#000000;--categoryHeader:rgba(0,0,0,0.87);--categoryColor:rgba(0,0,0,0.87);--categotyImgage:linear-gradient(-45deg,#ffa649,#f7645b,#805ed4);--postCardColor:rgba(0,0,0,0.87);--postCardHighlight:rgba(0,0,0,0.08);--postCardEmoji:#ffffff;--tableOfContentsFocusColor:rgb(33,37,41) background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;} body.dark{--bg:#21242d;--textNormal:#21242d;--headerBackground:#3B71DA;--bioBackground:#313746;--bioColor:#ffffff;--bioHighlight:#ffffff;--categoryHeader:#ffffff;--categoryColor:#727d86;--categotyImgage:#313746;--postCardColor:#ffffff;--postCardHighlight:#313746;--postCardEmoji:#313746;--tableOfContentsFocusColor:#f1f4f7;background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} a{color:#20a8ea;-webkit-text-decoration:none;text-decoration:none;word-break:break-all;-webkit-transition:.2s;transition:.2s;} a:focus{outline:none;} ol,ul,li{list-style:none;} blockquote,q{quotes:none;} blockquote::before,blockquote::after,q::before,q::after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} img{max-width:100%;} button,input{font-family:inherit;font-size:inherit;background:none;border:none;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;resize:none;} button:focus,input:focus{outline:none;}
/* sc-component-id: ContentWrapper__IndexContent-sc-11a8f56-0 */
.bKvkBm{max-width:1200px;margin:0 auto;padding:0 1.5em;} @media screen and (max-width:950px){.bKvkBm{max-width:760px;}} @media screen and (max-width:500px){.bKvkBm{padding:0 20px;}}
/* sc-component-id: Footer__FooterContent-zn4blm-0 */
.qFAAr{padding:0.1em 0;}
/* sc-component-id: Footer__FooterInner-zn4blm-1 */
.gQCnFr{margin-top:3em;text-align:center;padding:1.5em;border-top:solid 1px #313746;color:#727d86;font-size:14px;} .gQCnFr a{color:#727d86;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: ColorModeToggle__ToggleButton-pbocc9-0 */
.iRqtPU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:auto;cursor:pointer;} .iRqtPU .icon-sun{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#222;} .iRqtPU .icon-moon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#fff;}
/* sc-component-id: Header__HeaderTag-ewwnf4-0 */
.RRmay{background:var(--headerBackground);width:100%;box-shadow:rgba(0,0,0,0.2) 0px 3px 3px -2px,rgba(0,0,0,0.14) 0px 3px 4px 0px,rgba(0,0,0,0.12) 0px 1px 8px 0px;}
/* sc-component-id: Header__HeaderInner-ewwnf4-1 */
.fARCIn{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px;} .fARCIn .logo{width:200px;height:55px;} @media screen and (max-width:500px){.fARCIn .logo{margin:0 auto;}} .fARCIn .message-link{position:absolute;right:0;top:7px;display:block;width:34px;} .fARCIn .message-link:hover{top:5px;}
/* sc-component-id: Layout__Content-sc-2dvbv0-0 */
.jzKyDb{margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.jzKyDb{display:block;}} @media screen and (max-width:500px){.jzKyDb{margin-top:0;}}
/* sc-component-id: MainWrapper__IndexWrapper-fdnybq-0 */
.ghKhoM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.ghKhoM{display:block;}} @media screen and (max-width:500px){.ghKhoM{margin-top:0;}}
/* sc-component-id: MainWrapper__ContentsWrapper-fdnybq-1 */
.itpjOs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:calc(100% - 290px - 40px);margin-right:40px;} @media screen and (max-width:950px){.itpjOs{width:100%;}}
/* sc-component-id: CategoryLabel__Wrapper-m6lbf0-0 */
.ewFmUv .category-text{padding:0.3em 1em;display:inline-block;display:inline;padding:3px 6px;line-height:1.2;font-size:12px;border-radius:2px;font-weight:700;color:#fff;} @media screen and (max-width:950px){.ewFmUv .category-text{font-size:11px;padding:2.5px 6px;}}
/* sc-component-id: RelatedPosts__Wrapper-sc-1nrzwfn-0 */
.fFDafD{background:#f1f4f7;padding:2em 2.5em;} @media screen and (max-width:500px){.fFDafD{padding:30px 20px;}}
/* sc-component-id: RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 */
.gvYRzK .post-card-link{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1em;padding:15px;background:#fff;border-radius:5px;color:#313746;box-shadow:0 1px 2px rgba(0,0,0,0.1);} .gvYRzK .post-card-link:hover{background:#e0ebf1;} @media screen and (max-width:500px){.gvYRzK .post-card-link{padding:10px;}}
/* sc-component-id: RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 */
.COWRd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:0;width:80px;height:80px;background:#f1f4f7;border-radius:4px;font-size:50px;} .COWRd img{width:55px;height:55px;}
/* sc-component-id: RelatedPosts__PostCardContent-sc-1nrzwfn-3 */
.jNfPFJ{width:calc(100% - 80px);padding-left:15px;} .jNfPFJ h5{font-size:1.1em;font-weight:700;line-height:1.45;} .jNfPFJ time{display:block;margin-bottom:0.1em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;font-size:0.8em;color:#969fa7;} @media screen and (max-width:500px){.jNfPFJ{padding-left:15px;}.jNfPFJ h5{font-size:1em;}}
/* sc-component-id: TableOfContents__TableIndex-sc-1xzats2-0 */
.jkbcXl{position:-webkit-sticky;position:sticky;top:2em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;width:320px;padding:1.5em;font-size:20px;background:var(--bioBackground);border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,0.4);} @media screen and (max-width:950px){.jkbcXl{position:relative;margin:2em 0;width:100%;}} @media screen and (max-width:500px){.jkbcXl{padding:1.3em 1em;}}
/* sc-component-id: TableOfContents__TableWrapper-sc-1xzats2-1 */
.eUzVwc{display:block;width:100%;max-height:calc(100vh - 200px);word-break:break-word;font-size:14px;color:black;overflow:auto;border-left:1.5px solid rgb(233,236,239);}
/* sc-component-id: TableOfContents__TableHeader-sc-1xzats2-2 */
.guDYpi{display:block;text-align:center;font-size:18px;color:var(--bioColor);margin-bottom:15px;}
/* sc-component-id: TableOfContents__TableContents-sc-1xzats2-3 */
.bcrmFE{margin-left:10px;} .bcrmFE a{color:rgb(134,142,150);} .bcrmFE a:hover{color:var(--tableOfContentsFocusColor);} .bcrmFE ul{list-style:none;margin-left:10px;margin-bottom:0px;} .bcrmFE ul > li{line-height:1.5rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;} .bcrmFE ul > li a[href='']{color:var(--tableOfContentsFocusColor);font-weight:600;}
/* sc-component-id: post__Content-sc-1em13mo-0 */
.chZKnq{position:relative;background:#fff;overflow:hidden;font-size:16px;} .chZKnq:before,.chZKnq:after{content:'';position:absolute;width:0;height:0;z-index:5;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;} .chZKnq:before{top:0;left:0;border-top:20px solid var(--bg);border-right:20px solid transparent;} .chZKnq:after{bottom:0;right:0;border-bottom:20px solid var(--bg);border-left:20px solid transparent;} @media screen and (max-width:500px){.chZKnq{margin:0 -20px;}.chZKnq:before,.chZKnq:after{content:none;}}
/* sc-component-id: post__HeroImage-sc-1em13mo-1 */
.lgloNz{position:relative;background:#313746;text-align:center;background-image:url("/static/pattern-00b88abde489053a0ab3b3e799db37b9.svg");background-repeat:repeat;background-size:400px;min-height:230px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .lgloNz .emoji{width:110px;height:110px;} @media screen and (max-width:500px){.lgloNz{min-height:190px;}}
/* sc-component-id: post__ContentMain-sc-1em13mo-2 */
.juBGvQ{padding:1.8em 2.5em;} @media screen and (max-width:500px){.juBGvQ{padding:30px 20px;}}
/* sc-component-id: post__PostTitle-sc-1em13mo-3 */
.fpGsDA{margin:0.1em 0 0.3em;font-size:1.8em;font-weight:700;line-height:1.5;} @media screen and (max-width:500px){.fpGsDA{font-size:25px;}}
/* sc-component-id: post__PostDate-sc-1em13mo-4 */
.dcRxDp{display:block;color:#969fa7;font-size:0.9em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}
/* sc-component-id: post__PostContent-sc-1em13mo-5 */
.dbnIIr{margin:1.5em 0 1em;line-height:1.9;} .dbnIIr .gatsby-highlight{margin:1.5em 0;} @media screen and (max-width:500px){.dbnIIr .gatsby-highlight{margin:1.5em -20px;}} .dbnIIr code[class*='language-'],.dbnIIr pre[class*='language-']{-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:Menlo,Monaco,'Courier New',monospace;color:#22aef1;text-shadow:none;word-break:break-all;} .dbnIIr pre[class*='language-'],.dbnIIr:not(pre) > code[class*='language-']{background:#313746;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.5);} @media screen and (max-width:500px){.dbnIIr pre[class*='language-'],.dbnIIr:not(pre) > code[class*='language-']{border-radius:0;}} .dbnIIr pre[class*='language-']{padding:1.2em 1.2em;-webkit-overflow-scrolling:touch;position:relative;font-size:14.5px;overflow:auto;} .dbnIIr .gatsby-highlight pre[class*='language-'].line-numbers{padding-left:3.4em;} .dbnIIr pre[class*='language-'].line-numbers span.line-numbers-rows{padding:1.2em 0 1.2em 0.7em;background-color:hsla(0,0%,78.4%,0.15);border:none;} .dbnIIr .token.namespace{opacity:0.7;} .dbnIIr .token.comment,.dbnIIr .token.prolog,.dbnIIr .token.doctype,.dbnIIr .token.cdata{color:rgba(255,255,255,0.6);} .dbnIIr .token.operator,.dbnIIr .token.boolean,.dbnIIr .token.number{color:#a77afe;} .dbnIIr .token.attr-name,.dbnIIr .token.string{color:#ffab3c;} .dbnIIr .token.entity,.dbnIIr .token.url,.dbnIIr .language-css .token.string,.dbnIIr .style .token.string{color:#ffab3c;} .dbnIIr .token.selector,.dbnIIr .token.inserted{color:#3eda86;} .dbnIIr .token.atrule,.dbnIIr .token.attr-value,.dbnIIr .token.keyword,.dbnIIr .token.important,.dbnIIr .token.deleted{color:#ff7574;} .dbnIIr .token.regex,.dbnIIr .token.statement{color:#22aef1;} .dbnIIr .token.placeholder,.dbnIIr .token.variable{color:#fff;} .dbnIIr .token.important,.dbnIIr .token.statement,.dbnIIr .token.bold{font-weight:700;} .dbnIIr .token.punctuation{color:#bebec5;} .dbnIIr .token.entity{cursor:help;} .dbnIIr .token.italic{font-style:italic;} .dbnIIr code.language-markup{color:#f9f9f9;} .dbnIIr code.language-markup .token.tag{color:#ff7574;} .dbnIIr code.language-markup .token.attr-name{color:#3eda86;} .dbnIIr code.language-markup .token.attr-value{color:#ffab3c;} .dbnIIr code.language-markup .token.style,.dbnIIr code.language-markup .token.script{color:#22aef1;} .dbnIIr code.language-markup .token.script .token.keyword{color:#22aef1;} .dbnIIr .gatsby-highlight-code-line{background-color:rgba(0,0,0,0.3);display:table;min-width:calc(100% + 1.2em * 2);margin-right:-1.2em;margin-left:-1.2em;padding-left:12px;border-left:5px solid #22aef1;} .dbnIIr .gatsby-code-title{position:relative;margin:1.5em 0 -24px auto;background:#616161;color:#fff;font-size:12px;height:24px;padding:0 8px;line-height:24px;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-weight:550;border-radius:0 8px;display:table;z-index:2;} @media screen and (max-width:500px){.dbnIIr .gatsby-code-title{border-radius:0 0 0 8px;margin-right:-20px;}} .dbnIIr .gatsby-code-title + .gatsby-highlight{margin-top:0;} .dbnIIr p > code,.dbnIIr li > code{color:#ff3860 !important;background:#f9f1f3;padding:0.15em 0.4em;margin:0.2em;border-radius:4px;font-size:0.85em;word-break:break-all;white-space:pre-line;} .dbnIIr strong > code{font-family:inherit !important;} .dbnIIr a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .dbnIIr p{margin-bottom:1em;} .dbnIIr h1,.dbnIIr h2,.dbnIIr h3,.dbnIIr h4,.dbnIIr h5,.dbnIIr h6{margin:40px 0 10px;font-weight:700;line-height:1.5;} .dbnIIr h1{margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.55em;} .dbnIIr h2{position:relative;margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.40em;} .dbnIIr h2:before{position:absolute;top:0;left:0;content:"";display:inline-block;width:5px;height:100%;border-radius:5px;background:linear-gradient(0deg,#ffa649 0%,#ffa649 50%,#f7645b 50%,#f7645b 100%);} .dbnIIr h3{margin:40px 0 12px;font-size:1.40em;} .dbnIIr h4{position:relative;padding-left:18px;font-size:1.2em;} .dbnIIr h4:before{position:absolute;top:.2em;left:0;content:"";display:inline-block;width:14px;height:19px;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuODrOOCpOODpOODvF8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzAgNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwIDQ1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0Y3NjQ1Qzt9Cgkuc3Qxe2ZpbGw6I0ZGQTc0ODt9Cjwvc3R5bGU+Cjx0aXRsZT5pY29uPC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4LjEsMzAuMWMwLDcuNS02LjEsMTMuNi0xMy42LDEzLjZTMC45LDM3LjcsMC45LDMwLjFTNywxNi41LDE0LjUsMTYuNVMyOC4xLDIyLjYsMjguMSwzMC4xeiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjguMSwxNS42YzAsNy41LTYuMSwxMy42LTEzLjYsMTMuNlMwLjksMjMuMSwwLjksMTUuNlM3LDIsMTQuNSwyUzI4LjEsOC4xLDI4LjEsMTUuNnoiLz4KPC9zdmc+Cg==");background-size:contain;background-repeat:no-repeat;} .dbnIIr ul,.dbnIIr ol{margin:1em 0;} .dbnIIr ul p,.dbnIIr ol p{margin:0;} .dbnIIr ul{padding-left:1.2em;} .dbnIIr ul li{margin:.4em 0;list-style:disc;} .dbnIIr ul ul{margin:0;} .dbnIIr ol{counter-reset:number;} .dbnIIr ol > li{list-style:none;list-style-position:inside;position:relative;padding:0 0 0 30px;margin:0.5em 0;} .dbnIIr ol > li:before{display:inline-block;position:absolute;left:0;top:0;width:20px;height:20px;margin:.4em 0;border-radius:25%;background:#5c9ee7;color:#fff;font-weight:700;font-size:14px;text-align:center;line-height:20px;content:counter(number);counter-increment:number;} .dbnIIr strong{font-weight:700;} .dbnIIr em{font-style:italic;} .dbnIIr del{-webkit-text-decoration:line-through;text-decoration:line-through;} .dbnIIr hr{display:block;margin:2em 0;border:none;border-top:dotted 3px #e1eaf3;} .dbnIIr table{display:block;border-spacing:2px;border-collapse:separate;overflow:auto;-webkit-overflow-scrolling:touch;width:auto;font-size:.9em;line-height:1.4;} .dbnIIr table th{background-color:#20a8ea;color:#FFF;padding:10px 12px;text-align:center;font-weight:700;} .dbnIIr table th[align="center"]{text-align:center;} .dbnIIr table th[align="right"]{text-align:right;} .dbnIIr table td{background-color:#f1f4f7;color:#313746;padding:10px 12px;} .dbnIIr table td code[class*='language-']{color:#313746;} .dbnIIr table thead tr th:first-child{border-radius:5px 0 0 0;} .dbnIIr table thead tr th:last-child{border-radius:0 5px 0 0;} .dbnIIr table tbody tr:last-child td:first-child{border-radius:0 0 0 5px;} .dbnIIr table tbody tr:last-child td:last-child{border-radius:0 0 5px 0;} .dbnIIr blockquote{margin:1em 0;padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5;} .dbnIIr .gatsby-resp-image-wrapper{margin:1em 0;border:solid 1px #e5e8ea;box-shadow:1px 1px 20px lightgrey;border-radius:4px;overflow:hidden;} .dbnIIr .anchor-header{margin:2px 0 0 0;} .dbnIIr .custom-block{margin:1em 0;background:#f1f4f7;} .dbnIIr .custom-block-heading{font-weight:700;} .dbnIIr .custom-block-heading .emoji{width:1.2em !important;height:1.2em !important;vertical-align:-0.2em !important;} .dbnIIr .custom-block-body{font-size:0.92em;} .dbnIIr .custom-block-body > *:first-child{margin-top:0;} .dbnIIr .custom-block-body > *:last-child{margin-bottom:0;} .dbnIIr .custom-block-body h5{font-size:1.05em;margin:20px 0 5px;} .dbnIIr > *:first-child{margin-top:0;} .dbnIIr .custom-block.simple{padding:1em 1.2em;border-radius:5px;} .dbnIIr .custom-block.simple .custom-block-heading{font-size:1.1em;} .dbnIIr .custom-block.info,.dbnIIr .custom-block.alert,.dbnIIr .custom-block.notice{padding:0.7em 1em;border-left:solid 4px #20a8ea;border-radius:1px 3px 3px 1px;} .dbnIIr .custom-block.alert{border-left-color:#f7615f;background:#ffeff0;} .dbnIIr .custom-block.alert .custom-block-heading{color:#f7615f;} .dbnIIr .custom-block.notice{border-left-color:#ffa22b;background:#fff4df;} .dbnIIr .custom-block.notice .custom-block-heading{color:#ffa22b;} .dbnIIr .custom-block.image-small,.dbnIIr .custom-block.image-medium{background:#c0e2fb;padding:1.5em;text-align:center;border-radius:5px;} .dbnIIr .custom-block.image-small .gatsby-resp-image-wrapper,.dbnIIr .custom-block.image-medium .gatsby-resp-image-wrapper{margin:0;border:none;box-shadow:0 5px 15px rgba(0,0,0,0.15);} .dbnIIr .custom-block.image-small .gatsby-resp-image-wrapper{max-width:350px !important;border:none;} .dbnIIr .custom-block.image-medium .gatsby-resp-image-wrapper{max-width:450px !important;border:none;}</style><link as="script" rel="preload" href="/webpack-runtime-b8c0a1b2a0b8afab3710.js"/><link as="script" rel="preload" href="/framework-59a9ef51c55d9b62f7de.js"/><link as="script" rel="preload" href="/styles-09367947dddffb36886c.js"/><link as="script" rel="preload" href="/app-0c2c3cb933e0b0944208.js"/><link as="script" rel="preload" href="/de71a805-ab927e1633c63597cfb4.js"/><link as="script" rel="preload" href="/53b27b57f60ee3e1ca57a66cde9add975dffb161-dbde980694c7235ad58c.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-11920d127411fbac570b.js"/><link as="fetch" rel="preload" href="/page-data/category/blog/spring-jpa-n+1-query/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="App" style="background-color:var(--bg);color:var(--textNormal);transition:color 0.2s ease-out, background 0.2s ease-out"><header class="Header__HeaderTag-ewwnf4-0 RRmay"><div class="ContentWrapper__IndexContent-sc-11a8f56-0 bKvkBm"><div class="Header__HeaderInner-ewwnf4-1 fARCIn"><a class="logo-link" href="/"><img class="logo" src="/static/logo-42e9962f0784e14369fff245074e7612.png" alt="Blausee 기술 블로그"/></a><div class="ColorModeToggle__ToggleButton-pbocc9-0 iRqtPU"><div style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:13px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:26px;width:54px;margin:0;position:relative;background:#d9dfe2;border-radius:13px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:26px;width:29px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-moon checkedIcon"><svg width="24" height="24" fill="#EFDC05"><rect width="24" height="24" fill="none" rx="0" ry="0"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M14.8102 3.2H13.8202C13.4902 3.2 13.2302 2.93 13.2302 2.6C13.2302 2.27 13.5002 2 13.8302 2H16.2602C16.5002 2 16.7202 2.15 16.8102 2.37C16.9002 2.59 16.8502 2.85 16.6802 3.02L15.2702 4.43H16.2602C16.5902 4.43 16.8602 4.7 16.8602 5.03C16.8602 5.36 16.5902 5.63 16.2602 5.63H13.8202C13.5802 5.63 13.3602 5.48 13.2702 5.26C13.1802 5.04 13.2302 4.78 13.4002 4.61L14.8102 3.2ZM20.1401 11.0101H21.1301C21.4601 11.0101 21.7401 11.2801 21.7401 11.6101C21.7401 11.9401 21.4701 12.2101 21.1401 12.2101H18.7001C18.4601 12.2101 18.2401 12.0601 18.1501 11.8401C18.0601 11.6201 18.1101 11.3601 18.2801 11.1901L19.6901 9.78008H18.7001C18.3701 9.78008 18.1001 9.51008 18.1001 9.18008C18.1001 8.85008 18.3701 8.58008 18.7001 8.58008H21.1301C21.3701 8.58008 21.5901 8.73008 21.6801 8.95008C21.7701 9.17008 21.7201 9.43008 21.5501 9.60008L20.1401 11.0101ZM11.0302 9.8499H12.8502L10.7002 11.9999C10.5302 12.1699 10.4802 12.4299 10.5702 12.6499C10.6602 12.8699 10.8802 13.0199 11.1202 13.0199H14.2902C14.6202 13.0199 14.8902 12.7499 14.8902 12.4199C14.8902 12.0899 14.6202 11.8199 14.2902 11.8199H12.5602L14.7102 9.6699C14.8802 9.4999 14.9302 9.2399 14.8402 9.0199C14.7502 8.7999 14.5302 8.6499 14.2902 8.6499H11.0202C10.6902 8.6499 10.4202 8.9199 10.4202 9.2499C10.4202 9.5799 10.7002 9.8499 11.0302 9.8499ZM14.5501 16.89C15.6601 16.89 16.7201 16.66 17.7101 16.19C17.9401 16.08 18.2101 16.13 18.3801 16.3C18.5601 16.48 18.6101 16.75 18.5001 16.98C17.0901 20.05 13.9901 22.03 10.6001 22.03C5.79013 22.03 1.88013 18.12 1.88013 13.31C1.88013 9.94004 3.87013 6.84004 6.93013 5.40004C7.16013 5.29004 7.43012 5.34004 7.61012 5.52004C7.79012 5.70004 7.84013 5.97004 7.73013 6.20004C7.27013 7.19004 7.03012 8.26004 7.03012 9.38004C7.03012 13.52 10.4001 16.89 14.5501 16.89ZM3.09013 13.31C3.09013 17.46 6.46012 20.83 10.6101 20.83C12.9901 20.83 15.2001 19.7 16.6001 17.85C15.9401 18.01 15.2501 18.09 14.5501 18.09C9.74013 18.09 5.83012 14.18 5.83012 9.38004C5.83012 8.68004 5.91013 7.99004 6.07013 7.32004C4.22013 8.73004 3.09013 10.94 3.09013 13.31Z"></path></svg></div></div><div style="height:26px;width:29px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-sun uncheckedIcon"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.2" baseProfile="tiny" viewBox="0 0 24 24" size="24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.934l1-2.934c.072-.213.078-.452 0-.682-.188-.553-.789-.848-1.341-.659-.553.189-.847.788-.659 1.341l1 2.934zM4 11c-.213-.072-.452-.078-.682 0-.553.188-.848.789-.659 1.341.189.553.788.847 1.341.659l2.934-1-2.934-1zM12 17.066l-1 2.934c-.072.213-.078.452 0 .682.188.553.789.848 1.341.659.553-.189.847-.788.659-1.341l-1-2.934zM21.341 11.657c-.188-.553-.788-.848-1.341-.659l-2.934 1 2.934 1c.213.072.452.078.682 0 .552-.188.847-.789.659-1.341zM5.636 7.05l2.781 1.367-1.367-2.781c-.1-.202-.265-.375-.482-.482-.524-.258-1.157-.042-1.415.482-.257.523-.041 1.157.483 1.414zM5.153 17.432c-.257.523-.041 1.156.482 1.414.523.257 1.157.041 1.414-.482l1.367-2.781-2.781 1.367c-.201.099-.374.263-.482.482zM18.363 16.949l-2.781-1.367 1.367 2.781c.1.202.264.375.482.482.523.257 1.156.041 1.414-.482s.042-1.157-.482-1.414zM18.844 6.566c.258-.524.042-1.157-.481-1.415-.523-.257-1.157-.041-1.414.482l-1.369 2.783 2.782-1.368c.202-.1.375-.264.482-.482zM12 7.5c-2.481 0-4.5 2.019-4.5 4.5s2.019 4.5 4.5 4.5 4.5-2.019 4.5-4.5-2.019-4.5-4.5-4.5z"></path></svg></div></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(0px);top:0;outline:0;box-shadow:0px 1px 5px rgba(0, 0, 0, 0.6);border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px" id="normal-switch"/></div></div></div></div></header><div class="ContentWrapper__IndexContent-sc-11a8f56-0 bKvkBm"><div class="Layout__Content-sc-2dvbv0-0 jzKyDb"><main><div class="MainWrapper__IndexWrapper-fdnybq-0 ghKhoM"><div class="MainWrapper__ContentsWrapper-fdnybq-1 itpjOs"><section class="post__Content-sc-1em13mo-0 chZKnq"><p class="post__HeroImage-sc-1em13mo-1 lgloNz"><img class="emoji" draggable="false" alt="✅" src="https://twemoji.maxcdn.com/v/12.1.6/svg/2705.svg"/></p><div class="post__ContentMain-sc-1em13mo-2 juBGvQ"><time class="post__PostDate-sc-1em13mo-4 dcRxDp">2020.06.29</time><h1 class="post__PostTitle-sc-1em13mo-3 fpGsDA">Spring JPA(ORM)의 N+1 쿼리 문제 해결</h1><div class="CategoryLabel__Wrapper-m6lbf0-0 ewFmUv"><a class="category-text" style="background:#ffa22b" href="/category/blog">블로그</a></div><div class="post__PostContent-sc-1em13mo-5 dbnIIr"><h2 id="개요" style="position:relative;"><a href="#%EA%B0%9C%EC%9A%94" aria-label="개요 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>개요</h2>
<p>평소 Spring 프로젝트를 개발하며 1:N 관계를 갖는 엔티티 클래스를 작성할때 아무런 의심없이 <code class="language-text">JPA</code>를 쉽게 사용했습니다.<br>
그러던 중, 스프링 스터디에서 N+1 쿼리 문제에 대한 이야기가 나왔고 개인 프로젝트에서 확인해 봤더니</p>
<p><strong>1:N 관계를 갖는 엔티티의 하위 엔티티를 조회할 때마다 엄청난 쿼리가 발생하고 있었습니다</strong></p>
<p>이번 포스팅에서는 <code class="language-text">Spring JPA</code>를 사용하다보면 쉽게 마주할 수 있는 <code class="language-text">N+1 쿼리</code>에 대해 원인과 해결 방법에 대해서 알아보고<br>
<code class="language-text">N+1 쿼리</code> 원인에 대해서 설명하면서 <code class="language-text">JPA</code>의 글로벌 패치 전략인 <code class="language-text">LAZY</code> 방식과 <code class="language-text">EAGER</code> 방식이 어떻게 다르게 동작하는지도 함께 알아보겠습니다.</p>
<h2 id="n1-쿼리-문제는-언제-발생할까-" style="position:relative;"><a href="#n1-%EC%BF%BC%EB%A6%AC-%EB%AC%B8%EC%A0%9C%EB%8A%94-%EC%96%B8%EC%A0%9C-%EB%B0%9C%EC%83%9D%ED%95%A0%EA%B9%8C-" aria-label="n1 쿼리 문제는 언제 발생할까  permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>N+1 쿼리 문제는 언제 발생할까 ?</h2>
<p>발생하는 경우는 다음과 같은 2가지 경우가 있습니다.</p>
<p>두 개의 엔티티가 <code class="language-text">1:N</code> 관계를 가지며 <code class="language-text">JPQL</code>로 객체를 조회할 때</p>
<ol>
<li><code class="language-text">EAGER</code> 전략으로 데이터를 가져오는 경우</li>
<li><code class="language-text">LAZY</code> 전략으로 데이터를 가져온 이후에 가져온 데이터에서 하위 엔티티를 다시 조회하는 경우</li>
</ol>
<p>예제를 통해 살펴봅시다 !</p>
<div class="custom-block info"><div class="custom-block-heading">JPQL이란 ?</div><div class="custom-block-body"><p>JPQL이란 플랫폼에 독립적인 객체지향 쿼리 언어입니다.<br>
자바 코드에서 데이터베이스를 조회할 때 특정 SQL이나 저장 엔진에 종속되지 않게 도와줍니다.</p></div></div>
<h2 id="n1-쿼리-예제" style="position:relative;"><a href="#n1-%EC%BF%BC%EB%A6%AC-%EC%98%88%EC%A0%9C" aria-label="n1 쿼리 예제 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>N+1 쿼리 예제</h2>
<h4 id="엔티티-모델링" style="position:relative;"><a href="#%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81" aria-label="엔티티 모델링 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>엔티티 모델링</h4>
<p><strong>Album Model</strong></p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Album</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>IDENTITY<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> albumTitle<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> locales<span class="token punctuation">;</span>

    <span class="token comment">// @OneToMany(mappedBy = "album", cascade = CascadeType.ALL, fetch = FetchType.EAGER) // 2번 상황</span>
    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"album"</span><span class="token punctuation">,</span> cascade <span class="token operator">=</span> <span class="token class-name">CascadeType</span><span class="token punctuation">.</span>ALL<span class="token punctuation">,</span> fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span>LAZY<span class="token punctuation">)</span> <span class="token comment">// 1번 상황</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Song</span><span class="token punctuation">></span></span> songs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><strong>Song Model</strong></p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Song</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>IDENTITY<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> track<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> length<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ManyToOne</span><span class="token punctuation">(</span>fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span>LAZY<span class="token punctuation">)</span>
    <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"album_id"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Album</span> album<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h4 id="하위-엔티티를-조회하지-않는-경우" style="position:relative;"><a href="#%ED%95%98%EC%9C%84-%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC-%EC%A1%B0%ED%9A%8C%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EA%B2%BD%EC%9A%B0" aria-label="하위 엔티티를 조회하지 않는 경우 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>하위 엔티티를 조회하지 않는 경우</h4>
<p><strong>Album의 Song에 접근하지 않은 경우</strong></p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> N1_쿼리테스트<span class="token function">_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Album</span><span class="token punctuation">></span></span> albums <span class="token operator">=</span> albumRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<h4 id="lazy-방식-결과" style="position:relative;"><a href="#lazy-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC" aria-label="lazy 방식 결과 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LAZY 방식 결과</h4>
<p>하위 엔티티에 접근하지 않았기 때문에 <code class="language-text">Album</code>만 가져오는 것을 볼 수 있습니다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 2.2857142857142856%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAP0lEQVQI1x2J2wkAQQgDrygXdVd8gP23lEM/AjOTz8zw3sM5B92NcXffTb/3QlWRmevTiQgRgaqCiCzPx8z4AUogIfEqUBzIAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="LAZY 방식"
        title="LAZY 방식"
        src="/static/5ededfa60eaa01b673c0709e2d89c049/8c557/lazy_1.png"
        srcset="/static/5ededfa60eaa01b673c0709e2d89c049/4edbd/lazy_1.png 175w,
/static/5ededfa60eaa01b673c0709e2d89c049/13ae7/lazy_1.png 350w,
/static/5ededfa60eaa01b673c0709e2d89c049/8c557/lazy_1.png 700w,
/static/5ededfa60eaa01b673c0709e2d89c049/e996b/lazy_1.png 1050w,
/static/5ededfa60eaa01b673c0709e2d89c049/2cefc/lazy_1.png 1400w,
/static/5ededfa60eaa01b673c0709e2d89c049/f238d/lazy_1.png 2078w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<h4 id="eager-방식-결과" style="position:relative;"><a href="#eager-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC" aria-label="eager 방식 결과 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EAGER 방식 결과</h4>
<p><strong>N+1 발생 !</strong></p>
<p><code class="language-text">JPQL</code>에서 동작한 쿼리를 통해서 <code class="language-text">Album</code>에 데이터를 조회합니다.<br>
그 이후 <code class="language-text">JPA</code>에서는 글로벌 패치 전략(<code class="language-text">Eager</code>로딩)을 보고 <code class="language-text">Album</code>의 <code class="language-text">Song</code> 대해서 추가적인 로딩 작업을 진행해 <code class="language-text">N+1 문제</code>를 발생시킵니다.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 21.142857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAc0lEQVQY01WPSQ7AMAgD+VRO2bf/P4lqkFy1h8jjYAixtZaPMbz37l8+54TKt9ZC55zBtdao4TlwSskNo4a9dwwVo3iaNZBGuJQSrBxK3QANZSs8wXvvL6ijLANhesijPGzaTgGKYn0LD2tTfM75fYB76QPtVIs53/n24QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="EAGER 방식"
        title="EAGER 방식"
        src="/static/ed00f430126589211d379f6a7759143d/8c557/eager_1.png"
        srcset="/static/ed00f430126589211d379f6a7759143d/4edbd/eager_1.png 175w,
/static/ed00f430126589211d379f6a7759143d/13ae7/eager_1.png 350w,
/static/ed00f430126589211d379f6a7759143d/8c557/eager_1.png 700w,
/static/ed00f430126589211d379f6a7759143d/e996b/eager_1.png 1050w,
/static/ed00f430126589211d379f6a7759143d/2cefc/eager_1.png 1400w,
/static/ed00f430126589211d379f6a7759143d/5b2ff/eager_1.png 2190w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<h2 id="하위-엔티티를-조회하는-경우" style="position:relative;"><a href="#%ED%95%98%EC%9C%84-%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC-%EC%A1%B0%ED%9A%8C%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0" aria-label="하위 엔티티를 조회하는 경우 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>하위 엔티티를 조회하는 경우</h2>
<p><code class="language-text">Lazy</code> 로딩을 하기 위해서는 해당 <code class="language-text">Entity</code> 가 영속 상태여야 합니다.<br>
보통 <code class="language-text">Repository</code> 에서 리스트로 가져오면 영속이 끊긴 상태로 가져오기 때문에 <code class="language-text">Lazy</code> 전략 테스팅 시 <code class="language-text">@Transactional</code> 꼭 사용해야합니다 !</p>
<p><code class="language-text">@Transactional</code>을 사용하지 않으면 다음과 같은 에러가 발생합니다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 19.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVQY0zWP0W6DMAxF+ZwVCF1jB0IIVG0nVaMtZRv//yt3N9n6cGTLsY9uisv7ATdr8UluVnJ/PdhcZ+0wuIhRBwQJOGmL2XucRXDc79GaBmIMHJG6JgZF3zT4EsWmDncKH/LHpoqVs8V5LBTfxeHhWpynCdM4Ig4DYgjwzqGhzFRVpvAUrv/Cmale0h/VLN3Yr6wffY8TiTHiSGnHpJb7FSVvux3Kssxk4ZNH3zx6fTtJU+o0W1Ji1mvb4UJhSMnISHGqjm/CnZopk/AXn1CEbHXpJBkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="프록시 에러"
        title="프록시 에러"
        src="/static/922868e893bb9f17fc4d75c22953f61c/8c557/proxy_error.png"
        srcset="/static/922868e893bb9f17fc4d75c22953f61c/4edbd/proxy_error.png 175w,
/static/922868e893bb9f17fc4d75c22953f61c/13ae7/proxy_error.png 350w,
/static/922868e893bb9f17fc4d75c22953f61c/8c557/proxy_error.png 700w,
/static/922868e893bb9f17fc4d75c22953f61c/e996b/proxy_error.png 1050w,
/static/922868e893bb9f17fc4d75c22953f61c/2cefc/proxy_error.png 1400w,
/static/922868e893bb9f17fc4d75c22953f61c/42267/proxy_error.png 2670w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p><strong>Album의 Song에 접근하는 경우</strong></p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@Transactional</span> <span class="token comment">// 테스팅에서 LAZY 전략시 필수</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> N1_쿼리테스트<span class="token function">_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Album</span><span class="token punctuation">></span></span> albums <span class="token operator">=</span> albumRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Album</span> album <span class="token operator">:</span> albums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>album<span class="token punctuation">.</span><span class="token function">getSongs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Song에 접근 !</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h4 id="lazy-방식-결과-1" style="position:relative;"><a href="#lazy-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC-1" aria-label="lazy 방식 결과 1 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LAZY 방식 결과</h4>
<p><strong>N+1 발생 !</strong></p>
<p>처음엔 <code class="language-text">Album</code> 리스트만 조회했지만 <code class="language-text">Album</code> 엔티티에서 하위 엔티티인 <code class="language-text">Song</code> 엔티티로 접근했기 때문에 Lazy 로딩이 일어나면서 <code class="language-text">N+1 문제</code> 발생
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 40.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAz0lEQVQoz2WRWQ6DQAxDuRI7Yh1A4v43CnqWXKXth5VlEo+TVOd5RikljuOI67pi3/dYlkUxFqzrGvM8y9+2TT4gD8jx1jRNVJBBBMF93ypo2zaGYfiyXdcJfd8rphmfd/JYYhFmlQBSlPIzoNBkJoCUeBzHjyUvQgABY0zTpCZbF2bSTPinkDFR6P15JI9qgjyyCf1hVlpBwpi/No+eD4APmfeaFWpklKES+zyPfF+aIgj4HbAGYJXO5RVJoXfIAUjWda0GLumLGo6pscpsXx14CZCWTADAAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="LAZY 방식2"
        title="LAZY 방식2"
        src="/static/a862e7a46a9b1e5d0c728276a25b79ec/8c557/lazy_2.png"
        srcset="/static/a862e7a46a9b1e5d0c728276a25b79ec/4edbd/lazy_2.png 175w,
/static/a862e7a46a9b1e5d0c728276a25b79ec/13ae7/lazy_2.png 350w,
/static/a862e7a46a9b1e5d0c728276a25b79ec/8c557/lazy_2.png 700w,
/static/a862e7a46a9b1e5d0c728276a25b79ec/e996b/lazy_2.png 1050w,
/static/a862e7a46a9b1e5d0c728276a25b79ec/2cefc/lazy_2.png 1400w,
/static/a862e7a46a9b1e5d0c728276a25b79ec/a7115/lazy_2.png 2186w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<h4 id="eager-방식-결과-1" style="position:relative;"><a href="#eager-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC-1" aria-label="eager 방식 결과 1 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EAGER 방식 결과</h4>
<p><strong>N+1 발생 !</strong></p>
<p><code class="language-text">하위 엔티티를 조회하지 않는 경우</code>의 <code class="language-text">Eager</code> 방식 결과와 동일하게 <code class="language-text">N+1 문제</code>가 발생하는 것을 볼 수 있습니다.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 38.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0UlEQVQoz42QR46GUAyD33XobQGid+5/ooy+SEb/LKYsLJsQJ34J8zzbOI62bZsty2LTNLmmjuafetZ1dR6GwXEch3360WHfd2+8rssbpGnQPy07z9MZI/w8j/eg5QlqkFma+qdZyZUaaAE1eYK2s4EiA0hKjQVi1XUK+L7vb+np8ydT5KPveyvL0oqisKqqXKdpakmSvPwXgm7Utq0PyvPcIR3HsUVR5PwfBB2f2F3X+eCmaTyhuK7rFyTF+GNC3q6bMYwBJMuy7AVDBEy/DfwCSPIIOm/eojAAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="EAGER 방식2"
        title="EAGER 방식2"
        src="/static/988b3b4ebe7eff963353b86df5d09744/8c557/eager_2.png"
        srcset="/static/988b3b4ebe7eff963353b86df5d09744/4edbd/eager_2.png 175w,
/static/988b3b4ebe7eff963353b86df5d09744/13ae7/eager_2.png 350w,
/static/988b3b4ebe7eff963353b86df5d09744/8c557/eager_2.png 700w,
/static/988b3b4ebe7eff963353b86df5d09744/e996b/eager_2.png 1050w,
/static/988b3b4ebe7eff963353b86df5d09744/2cefc/eager_2.png 1400w,
/static/988b3b4ebe7eff963353b86df5d09744/a7115/eager_2.png 2186w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<h2 id="해결-방법" style="position:relative;"><a href="#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95" aria-label="해결 방법 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>해결 방법</h2>
<p>미리 쿼리로 테이블을 조인해서 가져오기 때문에 <code class="language-text">Lazy</code>, <code class="language-text">Eager</code> 두개의 전략에 해당되는 해결법입니다.</p>
<h4 id="1-패치-조인fetch-join" style="position:relative;"><a href="#1-%ED%8C%A8%EC%B9%98-%EC%A1%B0%EC%9D%B8fetch-join" aria-label="1 패치 조인fetch join permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 패치 조인(Fetch Join)</h4>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">"select DISTINCT a from Album a join fetch a.songs"</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Album</span><span class="token punctuation">></span></span> <span class="token function">findAllJoinFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@Transactional</span> <span class="token comment">// 테스팅에서 LAZY 전략시 사용해야 동작</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> fetchJoin테스트<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Album</span><span class="token punctuation">></span></span> albums <span class="token operator">=</span> albumRepository<span class="token punctuation">.</span><span class="token function">findAllJoinFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Album</span> album <span class="token operator">:</span> albums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>album<span class="token punctuation">.</span><span class="token function">getSongs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Song에 접근 !</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 25.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAApklEQVQY03WQWQrEIBBEPU42s5kI2TT7/W9UQzUokwzz8WhL8dmt8t5jXVewEuccpmlCXdfoug7GmAdt26Lve1hrBe6FzLValgXbtmHfdxHO84xhGETYNE2UlGWJNE0jSZI8ckAF0XmeIqOoKAporUUSYM7zXM4CzG8Uu6OM9TiOOPI4jjIKO+TohJ2GzDUfybLsV3jfN67rEiG/gJeqqvrbxTdv4QfuL59816Kg7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="패치 조인"
        title="패치 조인"
        src="/static/e260f1257d155697e8d5ae436886459b/8c557/fetch_join.png"
        srcset="/static/e260f1257d155697e8d5ae436886459b/4edbd/fetch_join.png 175w,
/static/e260f1257d155697e8d5ae436886459b/13ae7/fetch_join.png 350w,
/static/e260f1257d155697e8d5ae436886459b/8c557/fetch_join.png 700w,
/static/e260f1257d155697e8d5ae436886459b/e996b/fetch_join.png 1050w,
/static/e260f1257d155697e8d5ae436886459b/2cefc/fetch_join.png 1400w,
/static/e260f1257d155697e8d5ae436886459b/bcec6/fetch_join.png 1834w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p>패치 조인의 단점은 2가지가 있습니다.</p>
<ol>
<li><code class="language-text">JPA</code>가 제공하는 <code class="language-text">Pagable</code> 기능 사용 불가 (페이징 API)</li>
<li>
<p><code class="language-text">1:N</code> 관계가 2개인 엔티티를 패치 조인 사용 불가</p>
<blockquote>
<p>임시 해결법은 <code class="language-text">List -&gt; Set</code>으로 변경하는 것</p>
</blockquote>
</li>
</ol>
<h4 id="2-batch-size-조절" style="position:relative;"><a href="#2-batch-size-%EC%A1%B0%EC%A0%88" aria-label="2 batch size 조절 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Batch Size 조절</h4>
<p>설정한 <code class="language-text">Size</code>만큼 데이터를 미리 로딩합니다. (<code class="language-text">where in</code>을 사용하여)<br>
<code class="language-text">JPA</code>의 페이징 API 기능과 함께 사용할 때 유용하게 사용 가능할 듯 합니다.</p>
<div class="gatsby-code-title">Java</div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token annotation punctuation">@BatchSize</span><span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"album"</span><span class="token punctuation">,</span> cascade <span class="token operator">=</span> <span class="token class-name">CascadeType</span><span class="token punctuation">.</span>ALL<span class="token punctuation">,</span> fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span>EAGER<span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Song</span><span class="token punctuation">></span></span> songs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<h2 id="마무리" style="position:relative;"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-label="마무리 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>마무리</h2>
<p>Spring JPA의 N+1 문제에 대해 알아보고, 발생하는 경우와 해결 방법에 대해서 알아보았습니다.</p>
<p>긴글 봐주셔서 감사합니다. 🙇🏻‍♂️</p></div></div><aside><div class="RelatedPosts__Wrapper-sc-1nrzwfn-0 fFDafD"><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/blog/about-multi-thread-env/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 COWRd"><img class="emoji" draggable="false" alt="🏘" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f3d8.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>멀티 스레드 환경의 자원 공유에 대하여</h5><time>2020.06.16</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/blog/performance-comparison-prisma-typeorm/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 COWRd"><img class="emoji" draggable="false" alt="⁉️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/2049.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>Prisma와 TypeORM은 성능에 차이가 있을까?</h5><time>2020.06.11</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/blog/getting-started-utterances/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 COWRd"><img class="emoji" draggable="false" alt="💬" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f4ac.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>Gatsby 블로그 - utterances 소셜 댓글 기능 도입하기</h5><time>2020.06.07</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/blog/getting-started-markdown/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 COWRd"><img class="emoji" draggable="false" alt="📋" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f4cb.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>마크다운 (Markdown) 문법 알아보기</h5><time>2020.06.04</time></div></a></div></div><div></div></aside></section></div><div class="TableOfContents__TableIndex-sc-1xzats2-0 jkbcXl"><div class="TableOfContents__TableWrapper-sc-1xzats2-1 eUzVwc table-of-contents"><h1 class="TableOfContents__TableHeader-sc-1xzats2-2 guDYpi">🔖 Catalog</h1><div class="TableOfContents__TableContents-sc-1xzats2-3 bcrmFE"><ul>
<li><a href="/category/blog/spring-jpa-n+1-query/#%EA%B0%9C%EC%9A%94">개요</a></li>
<li><a href="/category/blog/spring-jpa-n+1-query/#n1-%EC%BF%BC%EB%A6%AC-%EB%AC%B8%EC%A0%9C%EB%8A%94-%EC%96%B8%EC%A0%9C-%EB%B0%9C%EC%83%9D%ED%95%A0%EA%B9%8C-">N+1 쿼리 문제는 언제 발생할까 ?</a></li>
<li>
<p><a href="/category/blog/spring-jpa-n+1-query/#n1-%EC%BF%BC%EB%A6%AC-%EC%98%88%EC%A0%9C">N+1 쿼리 예제</a></p>
<ul>
<li>
<ul>
<li><a href="/category/blog/spring-jpa-n+1-query/#%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81">엔티티 모델링</a></li>
<li><a href="/category/blog/spring-jpa-n+1-query/#%ED%95%98%EC%9C%84-%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC-%EC%A1%B0%ED%9A%8C%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EA%B2%BD%EC%9A%B0">하위 엔티티를 조회하지 않는 경우</a></li>
<li><a href="/category/blog/spring-jpa-n+1-query/#lazy-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC">LAZY 방식 결과</a></li>
<li><a href="/category/blog/spring-jpa-n+1-query/#eager-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC">EAGER 방식 결과</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="/category/blog/spring-jpa-n+1-query/#%ED%95%98%EC%9C%84-%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC-%EC%A1%B0%ED%9A%8C%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0">하위 엔티티를 조회하는 경우</a></p>
<ul>
<li>
<ul>
<li><a href="/category/blog/spring-jpa-n+1-query/#lazy-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC-1">LAZY 방식 결과</a></li>
<li><a href="/category/blog/spring-jpa-n+1-query/#eager-%EB%B0%A9%EC%8B%9D-%EA%B2%B0%EA%B3%BC-1">EAGER 방식 결과</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="/category/blog/spring-jpa-n+1-query/#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95">해결 방법</a></p>
<ul>
<li>
<ul>
<li><a href="/category/blog/spring-jpa-n+1-query/#1-%ED%8C%A8%EC%B9%98-%EC%A1%B0%EC%9D%B8fetch-join">1. 패치 조인(Fetch Join)</a></li>
<li><a href="/category/blog/spring-jpa-n+1-query/#2-batch-size-%EC%A1%B0%EC%A0%88">2. Batch Size 조절</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/category/blog/spring-jpa-n+1-query/#%EB%A7%88%EB%AC%B4%EB%A6%AC">마무리</a></li>
</ul></div></div></div></div></main></div></div><footer class="Footer__FooterContent-zn4blm-0 qFAAr"><div class="ContentWrapper__IndexContent-sc-11a8f56-0 bKvkBm"><div class="Footer__FooterInner-zn4blm-1 gQCnFr"><div>© <!-- -->2020<!-- -->, Blausee. All rights reserved.</div></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/category/blog/spring-jpa-n+1-query/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-0c2c3cb933e0b0944208.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-71ad33effa27f873a1fc.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-aaabd06a16a990d9871a.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-7d8eaf1bc192709686d7.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-8dab18d4fe118a7a95b5.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-11920d127411fbac570b.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-11920d127411fbac570b.js" async=""></script><script src="/53b27b57f60ee3e1ca57a66cde9add975dffb161-dbde980694c7235ad58c.js" async=""></script><script src="/de71a805-ab927e1633c63597cfb4.js" async=""></script><script src="/app-0c2c3cb933e0b0944208.js" async=""></script><script src="/styles-09367947dddffb36886c.js" async=""></script><script src="/framework-59a9ef51c55d9b62f7de.js" async=""></script><script src="/webpack-runtime-b8c0a1b2a0b8afab3710.js" async=""></script></body></html>