<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1cfadd536e0ed4ee026c.css">pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.23.3"/><link rel="icon" href="/favicon-32x32.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#0c9ee4"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=83455313757f7d5558ecbb4d2c6744cf"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=83455313757f7d5558ecbb4d2c6744cf"/><style type="text/css">
    .anchor-header.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor-header.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor-header svg,
    h2 .anchor-header svg,
    h3 .anchor-header svg,
    h4 .anchor-header svg,
    h5 .anchor-header svg,
    h6 .anchor-header svg {
      visibility: hidden;
    }
    h1:hover .anchor-header svg,
    h2:hover .anchor-header svg,
    h3:hover .anchor-header svg,
    h4:hover .anchor-header svg,
    h5:hover .anchor-header svg,
    h6:hover .anchor-header svg,
    h1 .anchor-header:focus svg,
    h2 .anchor-header:focus svg,
    h3 .anchor-header:focus svg,
    h4 .anchor-header:focus svg,
    h5 .anchor-header:focus svg,
    h6 .anchor-header:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">[토비의 스프링] 1. 오브젝트와 의존관계 - 싱글톤 레지스트리와 오브젝트 스코프 | Blausee 기술 블로그</title><link data-react-helmet="true" rel="canonical" href="https://wwlee94.github.io/category/spring/toby-spring/object-dependency/singleton-registry/"/><meta data-react-helmet="true" name="description" content="싱글톤, 오브젝트 스코프"/><meta data-react-helmet="true" property="og:title" content="[토비의 스프링] 1. 오브젝트와 의존관계 - 싱글톤 레지스트리와 오브젝트 스코프"/><meta data-react-helmet="true" property="og:description" content="싱글톤, 오브젝트 스코프"/><meta data-react-helmet="true" property="og:image" content="https://wwlee94.github.io/images/ogp.png"/><meta data-react-helmet="true" property="og:type" content="website"/><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","headline":"[토비의 스프링] 1. 오브젝트와 의존관계 - 싱글톤 레지스트리와 오브젝트 스코프","image":"https://wwlee94.github.io/images/ogp.png","editor":"wwlee94","datePublished":"2020-06-10","dateCreated":"2020-06-10","dateModified":"2020-06-10","description":"싱글톤, 오브젝트 스코프","author":{"@type":"Person","name":"wwlee94","image":"https://wwlee94.github.io/images/avatar.png"},"publisher":{"@type":"Organization","name":"wwlee94","logo":{"@type":"ImageObject","url":"https://wwlee94.github.io/images/avatar.png","width":150,"height":150}}}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://wwlee94.github.io","name":"HOME"}},{"@type":"ListItem","position":2,"item":{"@id":"https://wwlee94.github.io/spring","name":"스프링"}},{"@type":"ListItem","position":3,"item":{"name":"[토비의 스프링] 1. 오브젝트와 의존관계 - 싱글톤 레지스트리와 오브젝트 스코프"}}]}</script><style data-styled="RRmay eYfJyt fARCIn iRqtPU jzKyDb ghKhoM itpjOs chZKnq lgloNz juBGvQ dcRxDp fpGsDA ewFmUv icKucM fFDafD gvYRzK hMlNHl jNfPFJ ehhrHX bIwdqB fYkEUy ntjaR qFAAr gQCnFr" data-styled-version="4.4.1">
/* sc-component-id: sc-global-2971809368 */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-tap-highlight-color:rgba(0,0,0,0);} html,body{height:100%;} body{--bg:#f5f5f5;--textNormal:#21242d;--headerBackground:#ffffff;--bioBackground:#ffffff;--bioColor:rgba(0,0,0,0.87);--bioHighlight:#000000;--categoryHeader:rgba(0,0,0,0.87);--categoryColor:rgba(0,0,0,0.87);--categotyImgage:linear-gradient(-45deg,#ffa649,#f7645b,#805ed4);--postCardColor:rgba(0,0,0,0.87);--postCardHighlight:rgba(0,0,0,0.08);--postCardEmoji:#ffffff;--tableOfContentsFocusColor:rgb(33,37,41) background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;} body.dark{--bg:#21242d;--textNormal:#21242d;--headerBackground:#3B71DA;--bioBackground:#313746;--bioColor:#ffffff;--bioHighlight:#ffffff;--categoryHeader:#ffffff;--categoryColor:#727d86;--categotyImgage:#313746;--postCardColor:#ffffff;--postCardHighlight:#313746;--postCardEmoji:#313746;--tableOfContentsFocusColor:#f1f4f7;background-color:var(--bg);color:var(--textNormal);line-height:1.6;font-size:100%;font-weight:400;font-family:"Helvetica Neue",Helvetica,Arial,"Hiragino Kaku Gothic ProN","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,sans-serif;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} a{color:#20a8ea;-webkit-text-decoration:none;text-decoration:none;word-break:break-all;-webkit-transition:.2s;transition:.2s;} a:focus{outline:none;} ol,ul,li{list-style:none;} blockquote,q{quotes:none;} blockquote::before,blockquote::after,q::before,q::after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} img{max-width:100%;} button,input{font-family:inherit;font-size:inherit;background:none;border:none;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;resize:none;} button:focus,input:focus{outline:none;}
/* sc-component-id: ContentWrapper__IndexContent-sc-11a8f56-0 */
.eYfJyt{max-width:1250px;margin:0 auto;padding:0 1.5em;} @media screen and (max-width:950px){.eYfJyt{max-width:760px;}} @media screen and (max-width:500px){.eYfJyt{padding:0 20px;}}
/* sc-component-id: Footer__FooterContent-zn4blm-0 */
.qFAAr{padding:0.1em 0;}
/* sc-component-id: Footer__FooterInner-zn4blm-1 */
.gQCnFr{margin-top:3em;text-align:center;padding:1.5em;border-top:solid 1px #313746;color:#727d86;font-size:14px;} .gQCnFr a{color:#727d86;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: ColorModeToggle__ToggleButton-pbocc9-0 */
.iRqtPU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:auto;cursor:pointer;} .iRqtPU .icon-sun{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#222;} .iRqtPU .icon-moon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;color:#fff;}
/* sc-component-id: Header__HeaderTag-ewwnf4-0 */
.RRmay{background:var(--headerBackground);width:100%;box-shadow:rgba(0,0,0,0.2) 0px 3px 3px -2px,rgba(0,0,0,0.14) 0px 3px 4px 0px,rgba(0,0,0,0.12) 0px 1px 8px 0px;}
/* sc-component-id: Header__HeaderInner-ewwnf4-1 */
.fARCIn{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px;} .fARCIn .logo{width:200px;height:55px;} @media screen and (max-width:500px){.fARCIn .logo{margin:0 auto;}} .fARCIn .message-link{position:absolute;right:0;top:7px;display:block;width:34px;} .fARCIn .message-link:hover{top:5px;}
/* sc-component-id: Layout__Content-sc-2dvbv0-0 */
.jzKyDb{margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.jzKyDb{display:block;}} @media screen and (max-width:500px){.jzKyDb{margin-top:0;}}
/* sc-component-id: MainWrapper__IndexWrapper-fdnybq-0 */
.ghKhoM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-top:2em;min-height:85vh;} @media screen and (max-width:950px){.ghKhoM{display:block;}} @media screen and (max-width:500px){.ghKhoM{margin-top:0;}}
/* sc-component-id: MainWrapper__ContentsWrapper-fdnybq-1 */
.itpjOs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:calc(100% - 290px - 40px);margin-right:40px;} @media screen and (max-width:950px){.itpjOs{width:100%;}}
/* sc-component-id: CategoryLabel__Wrapper-m6lbf0-0 */
.ewFmUv .category-text{padding:0.3em 1em;display:inline-block;display:inline;padding:3px 6px;line-height:1.2;font-size:12px;border-radius:2px;font-weight:700;color:#fff;} @media screen and (max-width:950px){.ewFmUv .category-text{font-size:11px;padding:2.5px 6px;}}
/* sc-component-id: RelatedPosts__Wrapper-sc-1nrzwfn-0 */
.fFDafD{background:#f1f4f7;padding:2em 2.5em;} @media screen and (max-width:500px){.fFDafD{padding:30px 20px;}}
/* sc-component-id: RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 */
.gvYRzK .post-card-link{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1em;padding:15px;background:#fff;border-radius:5px;color:#313746;box-shadow:0 1px 2px rgba(0,0,0,0.1);} .gvYRzK .post-card-link:hover{background:#e0ebf1;} @media screen and (max-width:500px){.gvYRzK .post-card-link{padding:10px;}}
/* sc-component-id: RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 */
.hMlNHl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 2px 4px rgba(0,0,0,0.4);margin:0;width:80px;height:80px;background:#f1f4f7;border-radius:4px;font-size:50px;} .hMlNHl img{width:55px;height:55px;}
/* sc-component-id: RelatedPosts__PostCardContent-sc-1nrzwfn-3 */
.jNfPFJ{width:calc(100% - 80px);padding-left:15px;} .jNfPFJ h5{font-size:1.1em;font-weight:700;line-height:1.45;} .jNfPFJ time{display:block;margin-bottom:0.1em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;font-size:0.8em;color:#969fa7;} @media screen and (max-width:500px){.jNfPFJ{padding-left:15px;}.jNfPFJ h5{font-size:1em;}}
/* sc-component-id: TableOfContents__TableIndex-sc-1xzats2-0 */
.ehhrHX{position:-webkit-sticky;position:sticky;top:2em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;width:320px;padding:1.5em;font-size:20px;background:none;border-radius:4px;} @media screen and (max-width:950px){.ehhrHX{position:relative;margin:2em 0;width:100%;}} @media screen and (max-width:500px){.ehhrHX{padding:1.3em 1em;}}
/* sc-component-id: TableOfContents__TableWrapper-sc-1xzats2-1 */
.bIwdqB{display:block;width:100%;max-height:calc(100vh - 150px);word-break:break-word;font-size:14px;color:black;overflow:auto;border-left:1.5px solid rgb(233,236,239);}
/* sc-component-id: TableOfContents__TableHeader-sc-1xzats2-2 */
.fYkEUy{display:block;text-align:left;font-size:17px;color:var(--bioColor);padding-left:15px;margin-bottom:15px;}
/* sc-component-id: TableOfContents__TableContents-sc-1xzats2-3 */
.ntjaR{margin-left:10px;} .ntjaR a{color:rgb(134,142,150);} .ntjaR a:hover{color:var(--tableOfContentsFocusColor);-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);} .ntjaR ul{list-style:none;margin-left:10px;margin-bottom:0px;} .ntjaR ul > li{line-height:1.5rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;} .ntjaR ul > li a[href='']{color:var(--tableOfContentsFocusColor);font-weight:600;}
/* sc-component-id: post__Content-sc-1em13mo-0 */
.chZKnq{position:relative;background:#fff;overflow:hidden;font-size:16px;} .chZKnq:before,.chZKnq:after{content:'';position:absolute;width:0;height:0;z-index:5;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;} .chZKnq:before{top:0;left:0;border-top:20px solid var(--bg);border-right:20px solid transparent;} .chZKnq:after{bottom:0;right:0;border-bottom:20px solid var(--bg);border-left:20px solid transparent;} @media screen and (max-width:500px){.chZKnq{margin:0 -20px;}.chZKnq:before,.chZKnq:after{content:none;}}
/* sc-component-id: post__HeroImage-sc-1em13mo-1 */
.lgloNz{position:relative;background:#313746;text-align:center;background-image:url("/static/pattern-00b88abde489053a0ab3b3e799db37b9.svg");background-repeat:repeat;background-size:400px;min-height:230px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .lgloNz .emoji{width:110px;height:110px;} @media screen and (max-width:500px){.lgloNz{min-height:190px;}}
/* sc-component-id: post__ContentMain-sc-1em13mo-2 */
.juBGvQ{padding:1.8em 2.5em;} @media screen and (max-width:500px){.juBGvQ{padding:30px 20px;}}
/* sc-component-id: post__PostTitle-sc-1em13mo-3 */
.fpGsDA{margin:0.1em 0 0.3em;font-size:1.8em;font-weight:700;line-height:1.5;} @media screen and (max-width:500px){.fpGsDA{font-size:25px;}}
/* sc-component-id: post__PostDate-sc-1em13mo-4 */
.dcRxDp{display:block;color:#969fa7;font-size:0.9em;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}
/* sc-component-id: post__PostContent-sc-1em13mo-5 */
.icKucM{margin:1.5em 0 1em;line-height:1.9;} .icKucM .gatsby-highlight{margin:1.5em 0;} @media screen and (max-width:500px){.icKucM .gatsby-highlight{margin:1.5em -20px;}} .icKucM code[class*='language-'],.icKucM pre[class*='language-']{-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:Menlo,Monaco,'Courier New',monospace;color:#ccc;text-shadow:none;word-break:break-all;} .icKucM pre[class*='language-'],.icKucM:not(pre) > code[class*='language-']{background:#313746;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.5);} @media screen and (max-width:500px){.icKucM pre[class*='language-'],.icKucM:not(pre) > code[class*='language-']{border-radius:0;}} .icKucM pre[class*='language-']{padding:1.2em 1.2em;-webkit-overflow-scrolling:touch;position:relative;font-size:14.5px;line-height:1.7;overflow:auto;} .icKucM .gatsby-highlight pre[class*='language-'].line-numbers{padding-left:3.4em;} .icKucM pre[class*='language-'].line-numbers span.line-numbers-rows{padding:1.2em 0 1.2em 0.7em;background-color:hsla(0,0%,78.4%,0.15);border:none;} .icKucM .token.comment,.icKucM .token.block-comment,.icKucM .token.prolog,.icKucM .token.doctype,.icKucM .token.cdata{color:#999;} .icKucM .token.punctuation{color:#ccc;} .icKucM .token.tag,.icKucM .token.attr-name,.icKucM .token.namespace,.icKucM .token.deleted{color:#e2777a;} .icKucM .token.function-name{color:#6196cc;} .icKucM .token.boolean,.icKucM .token.number,.icKucM .token.function{color:#f08d49;} .icKucM .token.property,.icKucM .token.class-name,.icKucM .token.constant,.icKucM .token.symbol{color:#f8c555;} .icKucM .token.selector,.icKucM .token.important,.icKucM .token.atrule,.icKucM .token.keyword,.icKucM .token.builtin{color:#cc99cd;} .icKucM .token.string,.icKucM .token.char,.icKucM .token.attr-value,.icKucM .token.regex,.icKucM .token.variable{color:#7ec699;} .icKucM .token.operator,.icKucM .token.entity,.icKucM .token.url{color:#67cdcc;} .icKucM .token.important,.icKucM .token.bold{font-weight:bold;} .icKucM .token.italic{font-style:italic;} .icKucM .token.entity{cursor:help;} .icKucM .token.inserted{color:green;} .icKucM .gatsby-code-title{position:relative;margin:1.5em 0 -24px auto;background:#616161;color:#fff;font-size:12px;height:24px;padding:0 8px;line-height:24px;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-weight:500;border-radius:0 5px;display:table;z-index:2;} @media screen and (max-width:500px){.icKucM .gatsby-code-title{border-radius:0 0 0 5px;margin-right:-20px;}} .icKucM .gatsby-code-title + .gatsby-highlight{margin-top:0;} .icKucM p > code,.icKucM li > code{color:#ff3860 !important;background:#f9f1f3;padding:0.15em 0.4em;margin:0.2em;border-radius:4px;font-size:0.85em;word-break:break-all;white-space:pre-line;} .icKucM strong > code{font-family:inherit !important;} .icKucM a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .icKucM p{margin:0.5em 0;} .icKucM h1,.icKucM h2,.icKucM h3,.icKucM h4,.icKucM h5,.icKucM h6{margin:40px 0 10px;font-weight:700;line-height:1.5;} .icKucM h1{margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.55em;} .icKucM h2{position:relative;margin:45px 0 12px;padding:5px 0 5px 17px;font-size:1.40em;} .icKucM h2:before{position:absolute;top:0;left:0;content:"";display:inline-block;width:5px;height:100%;border-radius:5px;background:linear-gradient(0deg,#ffa649 0%,#ffa649 50%,#f7645b 50%,#f7645b 100%);} .icKucM h3{margin:40px 0 12px;font-size:1.40em;} .icKucM h4{position:relative;padding-left:18px;font-size:1.2em;} .icKucM h4:before{position:absolute;top:.2em;left:0;content:"";display:inline-block;width:14px;height:19px;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuODrOOCpOODpOODvF8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzAgNDUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwIDQ1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0Y3NjQ1Qzt9Cgkuc3Qxe2ZpbGw6I0ZGQTc0ODt9Cjwvc3R5bGU+Cjx0aXRsZT5pY29uPC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4LjEsMzAuMWMwLDcuNS02LjEsMTMuNi0xMy42LDEzLjZTMC45LDM3LjcsMC45LDMwLjFTNywxNi41LDE0LjUsMTYuNVMyOC4xLDIyLjYsMjguMSwzMC4xeiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjguMSwxNS42YzAsNy41LTYuMSwxMy42LTEzLjYsMTMuNlMwLjksMjMuMSwwLjksMTUuNlM3LDIsMTQuNSwyUzI4LjEsOC4xLDI4LjEsMTUuNnoiLz4KPC9zdmc+Cg==");background-size:contain;background-repeat:no-repeat;} .icKucM ul,.icKucM ol{margin:1em 0;} .icKucM ul p,.icKucM ol p{margin:0;} .icKucM ul{padding-left:1.2em;} .icKucM ul li{margin:.4em 0;list-style:disc;} .icKucM ul ul,.icKucM ul ol{margin:0;} .icKucM ol{counter-reset:number;} .icKucM ol > li{list-style:none;list-style-position:inside;position:relative;padding:0 0 0 30px;margin:0.5em 0;} .icKucM ol > li:before{display:inline-block;position:absolute;left:0;top:0;width:20px;height:20px;margin:.4em 0;border-radius:25%;background:#5c9ee7;color:#fff;font-weight:700;font-size:14px;text-align:center;line-height:20px;content:counter(number);counter-increment:number;} .icKucM ol ul{margin:0;} .icKucM strong{font-weight:700;} .icKucM em{font-style:italic;} .icKucM del{-webkit-text-decoration:line-through;text-decoration:line-through;} .icKucM hr{display:block;margin:2em 0;border:none;border-top:dotted 3px #e1eaf3;} .icKucM table{display:block;margin:1em 0;border-spacing:2px;border-collapse:separate;overflow:auto;-webkit-overflow-scrolling:touch;width:auto;font-size:.9em;line-height:1.4;} .icKucM table th{background-color:#313746;color:#FFF;padding:10px 12px;text-align:center;font-weight:700;} .icKucM table th[align="center"]{text-align:center;} .icKucM table th[align="right"]{text-align:right;} .icKucM table td{background-color:#f1f4f7;color:#313746;padding:10px 12px;} .icKucM table td code[class*='language-']{color:#313746;} .icKucM table thead tr th:first-child{border-radius:5px 0 0 0;} .icKucM table thead tr th:last-child{border-radius:0 5px 0 0;} .icKucM table tbody tr:last-child td:first-child{border-radius:0 0 0 5px;} .icKucM table tbody tr:last-child td:last-child{border-radius:0 0 5px 0;} .icKucM blockquote{margin:1em 0;padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5;} .icKucM .gatsby-resp-image-wrapper{margin:1em 0;border:solid 1px #e5e8ea;box-shadow:1px 1px 20px lightgrey;border-radius:4px;overflow:hidden;} .icKucM .anchor-header{margin:2px 0 0 0;} .icKucM .custom-block{margin:1em 0;background:#f1f4f7;} .icKucM .custom-block-heading{font-weight:700;} .icKucM .custom-block-heading .emoji{width:1.2em !important;height:1.2em !important;vertical-align:-0.2em !important;} .icKucM .custom-block-body{font-size:0.92em;} .icKucM .custom-block-body > *:first-child{margin-top:0;} .icKucM .custom-block-body > *:last-child{margin-bottom:0;} .icKucM .custom-block-body h5{font-size:1.05em;margin:20px 0 5px;} .icKucM > *:first-child{margin-top:0;} .icKucM .custom-block.simple{padding:1em 1.2em;border-radius:5px;} .icKucM .custom-block.simple .custom-block-heading{font-size:1.1em;} .icKucM .custom-block.info,.icKucM .custom-block.alert,.icKucM .custom-block.notice{padding:0.7em 1em;border-left:solid 4px #20a8ea;border-radius:1px 3px 3px 1px;} .icKucM .custom-block.alert{border-left-color:#f7615f;background:#ffeff0;} .icKucM .custom-block.alert .custom-block-heading{color:#f7615f;} .icKucM .custom-block.notice{border-left-color:#ffa22b;background:#fff4df;} .icKucM .custom-block.notice .custom-block-heading{color:#ffa22b;} .icKucM .custom-block.image-small,.icKucM .custom-block.image-medium{background:#c0e2fb;padding:1.5em;text-align:center;border-radius:5px;} .icKucM .custom-block.image-small .gatsby-resp-image-wrapper,.icKucM .custom-block.image-medium .gatsby-resp-image-wrapper{margin:0;border:none;box-shadow:0 5px 15px rgba(0,0,0,0.15);} .icKucM .custom-block.image-small .gatsby-resp-image-wrapper{max-width:350px !important;border:none;} .icKucM .custom-block.image-medium .gatsby-resp-image-wrapper{max-width:450px !important;border:none;}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-74b794c52444066d47c3.js"/><link as="script" rel="preload" href="/framework-59a9ef51c55d9b62f7de.js"/><link as="script" rel="preload" href="/styles-09367947dddffb36886c.js"/><link as="script" rel="preload" href="/app-df598884cb90775b7a5f.js"/><link as="script" rel="preload" href="/de71a805-ab927e1633c63597cfb4.js"/><link as="script" rel="preload" href="/53b27b57f60ee3e1ca57a66cde9add975dffb161-5712ac1f8c839e77397f.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-801a9ef7b44fda3e8333.js"/><link as="fetch" rel="preload" href="/page-data/category/spring/toby-spring/object-dependency/singleton-registry/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="App" style="background-color:var(--bg);color:var(--textNormal);transition:color 0.2s ease-out, background 0.2s ease-out"><header class="Header__HeaderTag-ewwnf4-0 RRmay"><div class="ContentWrapper__IndexContent-sc-11a8f56-0 eYfJyt"><div class="Header__HeaderInner-ewwnf4-1 fARCIn"><a class="logo-link" href="/"><img class="logo" src="/static/logo-42e9962f0784e14369fff245074e7612.png" alt="Blausee 기술 블로그"/></a><div class="ColorModeToggle__ToggleButton-pbocc9-0 iRqtPU"><div style="position:relative;display:inline-block;text-align:left;opacity:1;direction:ltr;border-radius:13px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:26px;width:54px;margin:0;position:relative;background:#d9dfe2;border-radius:13px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:26px;width:29px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-moon checkedIcon"><svg width="24" height="24" fill="#EFDC05"><rect width="24" height="24" fill="none" rx="0" ry="0"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M14.8102 3.2H13.8202C13.4902 3.2 13.2302 2.93 13.2302 2.6C13.2302 2.27 13.5002 2 13.8302 2H16.2602C16.5002 2 16.7202 2.15 16.8102 2.37C16.9002 2.59 16.8502 2.85 16.6802 3.02L15.2702 4.43H16.2602C16.5902 4.43 16.8602 4.7 16.8602 5.03C16.8602 5.36 16.5902 5.63 16.2602 5.63H13.8202C13.5802 5.63 13.3602 5.48 13.2702 5.26C13.1802 5.04 13.2302 4.78 13.4002 4.61L14.8102 3.2ZM20.1401 11.0101H21.1301C21.4601 11.0101 21.7401 11.2801 21.7401 11.6101C21.7401 11.9401 21.4701 12.2101 21.1401 12.2101H18.7001C18.4601 12.2101 18.2401 12.0601 18.1501 11.8401C18.0601 11.6201 18.1101 11.3601 18.2801 11.1901L19.6901 9.78008H18.7001C18.3701 9.78008 18.1001 9.51008 18.1001 9.18008C18.1001 8.85008 18.3701 8.58008 18.7001 8.58008H21.1301C21.3701 8.58008 21.5901 8.73008 21.6801 8.95008C21.7701 9.17008 21.7201 9.43008 21.5501 9.60008L20.1401 11.0101ZM11.0302 9.8499H12.8502L10.7002 11.9999C10.5302 12.1699 10.4802 12.4299 10.5702 12.6499C10.6602 12.8699 10.8802 13.0199 11.1202 13.0199H14.2902C14.6202 13.0199 14.8902 12.7499 14.8902 12.4199C14.8902 12.0899 14.6202 11.8199 14.2902 11.8199H12.5602L14.7102 9.6699C14.8802 9.4999 14.9302 9.2399 14.8402 9.0199C14.7502 8.7999 14.5302 8.6499 14.2902 8.6499H11.0202C10.6902 8.6499 10.4202 8.9199 10.4202 9.2499C10.4202 9.5799 10.7002 9.8499 11.0302 9.8499ZM14.5501 16.89C15.6601 16.89 16.7201 16.66 17.7101 16.19C17.9401 16.08 18.2101 16.13 18.3801 16.3C18.5601 16.48 18.6101 16.75 18.5001 16.98C17.0901 20.05 13.9901 22.03 10.6001 22.03C5.79013 22.03 1.88013 18.12 1.88013 13.31C1.88013 9.94004 3.87013 6.84004 6.93013 5.40004C7.16013 5.29004 7.43012 5.34004 7.61012 5.52004C7.79012 5.70004 7.84013 5.97004 7.73013 6.20004C7.27013 7.19004 7.03012 8.26004 7.03012 9.38004C7.03012 13.52 10.4001 16.89 14.5501 16.89ZM3.09013 13.31C3.09013 17.46 6.46012 20.83 10.6101 20.83C12.9901 20.83 15.2001 19.7 16.6001 17.85C15.9401 18.01 15.2501 18.09 14.5501 18.09C9.74013 18.09 5.83012 14.18 5.83012 9.38004C5.83012 8.68004 5.91013 7.99004 6.07013 7.32004C4.22013 8.73004 3.09013 10.94 3.09013 13.31Z"></path></svg></div></div><div style="height:26px;width:29px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="icon-sun uncheckedIcon"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.2" baseProfile="tiny" viewBox="0 0 24 24" size="24" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.934l1-2.934c.072-.213.078-.452 0-.682-.188-.553-.789-.848-1.341-.659-.553.189-.847.788-.659 1.341l1 2.934zM4 11c-.213-.072-.452-.078-.682 0-.553.188-.848.789-.659 1.341.189.553.788.847 1.341.659l2.934-1-2.934-1zM12 17.066l-1 2.934c-.072.213-.078.452 0 .682.188.553.789.848 1.341.659.553-.189.847-.788.659-1.341l-1-2.934zM21.341 11.657c-.188-.553-.788-.848-1.341-.659l-2.934 1 2.934 1c.213.072.452.078.682 0 .552-.188.847-.789.659-1.341zM5.636 7.05l2.781 1.367-1.367-2.781c-.1-.202-.265-.375-.482-.482-.524-.258-1.157-.042-1.415.482-.257.523-.041 1.157.483 1.414zM5.153 17.432c-.257.523-.041 1.156.482 1.414.523.257 1.157.041 1.414-.482l1.367-2.781-2.781 1.367c-.201.099-.374.263-.482.482zM18.363 16.949l-2.781-1.367 1.367 2.781c.1.202.264.375.482.482.523.257 1.156.041 1.414-.482s.042-1.157-.482-1.414zM18.844 6.566c.258-.524.042-1.157-.481-1.415-.523-.257-1.157-.041-1.414.482l-1.369 2.783 2.782-1.368c.202-.1.375-.264.482-.482zM12 7.5c-2.481 0-4.5 2.019-4.5 4.5s2.019 4.5 4.5 4.5 4.5-2.019 4.5-4.5-2.019-4.5-4.5-4.5z"></path></svg></div></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(0px);top:0;outline:0;box-shadow:0px 1px 5px rgba(0, 0, 0, 0.6);border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px" id="normal-switch"/></div></div></div></div></header><div class="ContentWrapper__IndexContent-sc-11a8f56-0 eYfJyt"><div class="Layout__Content-sc-2dvbv0-0 jzKyDb"><main><div class="MainWrapper__IndexWrapper-fdnybq-0 ghKhoM"><div class="MainWrapper__ContentsWrapper-fdnybq-1 itpjOs"><section class="post__Content-sc-1em13mo-0 chZKnq"><p class="post__HeroImage-sc-1em13mo-1 lgloNz"><img class="emoji" draggable="false" alt="🔭" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f52d.svg"/></p><div class="post__ContentMain-sc-1em13mo-2 juBGvQ"><time class="post__PostDate-sc-1em13mo-4 dcRxDp">2020.06.10</time><h1 class="post__PostTitle-sc-1em13mo-3 fpGsDA">[토비의 스프링] 1. 오브젝트와 의존관계 - 싱글톤 레지스트리와 오브젝트 스코프</h1><div class="CategoryLabel__Wrapper-m6lbf0-0 ewFmUv"><a class="category-text" style="background:#C0D545" href="/category/spring">스프링</a></div><div class="post__PostContent-sc-1em13mo-5 icKucM"><h2 id="싱글톤-레지스트리와-오브젝트-스코프" style="position:relative;"><a href="#%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC%EC%99%80-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%EC%BD%94%ED%94%84" aria-label="싱글톤 레지스트리와 오브젝트 스코프 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>싱글톤 레지스트리와 오브젝트 스코프</h2>
<p>스프링의 애플리케이션 컨텍스트와 기존에 만들었던 DaoFactory는 중요한 차이점이 있습니다.</p>
<h4 id="오브젝트의-동일성과-동등성-" style="position:relative;"><a href="#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%EC%9D%98-%EB%8F%99%EC%9D%BC%EC%84%B1%EA%B3%BC-%EB%8F%99%EB%93%B1%EC%84%B1-" aria-label="오브젝트의 동일성과 동등성  permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>오브젝트의 동일성과 동등성 ?</h4>
<p>자바에서는 <code class="language-text">두 개의 객체가 같은가?</code> 에는 2가지 관점이 있습니다.</p>
<ol>
<li>
<p>완전히 같은 객체인지 비교</p>
<ul>
<li>동일성(identity)</li>
<li><code class="language-text">==</code> 연산자로 비교</li>
</ul>
</li>
<li>
<p>같은 정보를 담고 있는 객체인지 비교</p>
<ul>
<li>동등성(equality)</li>
<li><code class="language-text">equals()</code> 메서드로 비교</li>
</ul>
</li>
</ol>
<p>이를 통해서 하고 싶은 말은 스프링은 빈을 요청할 때 <code class="language-text">매번 동일한 객체</code>(동일성)를 돌려준다는 것입니다.</p>
<h4 id="싱글톤-레지스트리로서의-애플리케이션-컨텍스트" style="position:relative;"><a href="#%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%A1%9C%EC%84%9C%EC%9D%98-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8" aria-label="싱글톤 레지스트리로서의 애플리케이션 컨텍스트 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>싱글톤 레지스트리로서의 애플리케이션 컨텍스트</h4>
<p>애플리케이션 컨텍스트는 싱글톤을 저장하고 관리하는 <code class="language-text">싱글톤 레지스트리</code>이기도 합니다.</p>
<h5 id="스프링은-왜-싱글톤으로-빈을-만들까-" style="position:relative;"><a href="#%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%80-%EC%99%9C-%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9C%BC%EB%A1%9C-%EB%B9%88%EC%9D%84-%EB%A7%8C%EB%93%A4%EA%B9%8C-" aria-label="스프링은 왜 싱글톤으로 빈을 만들까  permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>스프링은 왜 싱글톤으로 빈을 만들까 ?</h5>
<p>스프링이 주로 적용되는 대상이 <code class="language-text">서버 환경</code>이기 때문입니다.</p>
<p>스프링이 처음 설계될때 대규모 엔터프라이즈 서버 환경은 초당 수십, 수백번씩 브라우저나 다른 시스템으로부터 요청을 받아 처리해야하는 <code class="language-text">높은 성능이 요구 되는 환경</code>이였습니다.<br>
(데이터 액세스 로직, 서비스 로직, 비즈니스 로직 .. 등을 분리하는 계층형 구조)</p>
<p>그런데, 매번 클라이언트에서 요청이 올 때마다 각 로직의 객체를 <code class="language-text">매번 새로 생성</code>하게 되면 ?</p>
<p>요청 한 번에 5개 객체 + 초 당 500개의 요청이 들어오면 1시간에 9백만개의 객체가 새로 생성됩니다.</p>
<p>이렇게 부하가 걸리면 <code class="language-text">서버가 감당하기 힘들기 때문</code>에 서버 환경에서는 싱글톤 사용이 권장됩니다.</p>
<h5 id="스프링은-ioc-컨테이너--싱글톤-레지스트리" style="position:relative;"><a href="#%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%80-ioc-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88--%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC" aria-label="스프링은 ioc 컨테이너  싱글톤 레지스트리 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>스프링은 IoC 컨테이너 + 싱글톤 레지스트리</h5>
<p>스프링은 직접 싱글톤 형태의 객체를 만들고 관리하는 기능을 제공합니다.</p>
<blockquote>
<p>이게 바로 싱글톤 레지스트리 (singleton registry)</p>
</blockquote>
<p>싱글톤 레지스트리의 <code class="language-text">장점</code>은 평범한 자바 클래스를 싱글톤으로 활용하게 도와준다는 점입니다.</p>
<blockquote>
<p>기존 싱글톤 패턴을 적용하려면 private 생성자 + static 메서드로 구현해야함)</p>
</blockquote>
<p>싱글톤으로 사용돼야 하는 상황이 아닌 경우 (Ex: 테스팅 환경) 에도 자유롭게 여러 객체를 생성해서 사용 가능합니다.</p>
<h4 id="싱글톤으로-만들어지기-때문에-주의-해야할-점" style="position:relative;"><a href="#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%80%EA%B8%B0-%EB%95%8C%EB%AC%B8%EC%97%90-%EC%A3%BC%EC%9D%98-%ED%95%B4%EC%95%BC%ED%95%A0-%EC%A0%90" aria-label="싱글톤으로 만들어지기 때문에 주의 해야할 점 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>싱글톤으로 만들어지기 때문에 주의 해야할 점</h4>
<p>멀티스레드 환경에서는 싱글톤 객체 하나를 여러 스레드에서 나누어 사용할 수 있습니다.</p>
<p>따라서, 싱글톤은 기본적으로 인스턴스 변수의 값을 변경하는 방식으로 만들지 않습니다.</p>
<blockquote>
<p>단, 읽기 전용 값이라면 인스턴스 변수를 사용하는 것에 제약이 없다 !</p>
</blockquote>
<p>그래서 <code class="language-text">메서드 파라미터</code>, <code class="language-text">로컬 변수</code>, <code class="language-text">리턴 값</code> 등을 이용합니다.</p>
<p>이들은 매번 새로운 값을 저장할 독립적인 공간(<code class="language-text">스택</code>) 에서 만들어집니다.</p>
<p>따라서, 싱글톤이라고 해도 여러 스레드가 값을 덮어쓸 일은 없습니다.</p>
<hr>
<p><strong>Ex) Java 변수의 종류</strong></p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>
  <span class="token keyword">int</span> iv<span class="token punctuation">;</span>          <span class="token comment">// 인스턴스 변수 (힙에 저장) -> test 객체가 heap에 저장</span>
  <span class="token keyword">static</span> <span class="token keyword">int</span> cv<span class="token punctuation">;</span>   <span class="token comment">// 클래스 변수 (메모리 맨위에 먼저 올림 - static)</span>
  <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> lv<span class="token punctuation">;</span>        <span class="token comment">// 로컬 변수 (스택에 저장)</span>
  <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h4 id="스프링-빈의-스코프" style="position:relative;"><a href="#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88%EC%9D%98-%EC%8A%A4%EC%BD%94%ED%94%84" aria-label="스프링 빈의 스코프 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>스프링 빈의 스코프</h4>
<p><strong>빈의 스코프(scope)란 ?</strong><br>
스프링이 관리하는 객체, 즉 빈이 생성되고 존재하고 적용되는 범위</p>
<p>스프링 빈의 기본 스코프는 싱글톤입니다.</p>
<p>경우에 따라서 싱글톤 외의 스코프를 가질 수 있습니다.</p>
<p>대표적으로 프로토타입 스코프(prototype), 싱글톤과 달리 빈을 요청할 때마다 새로운 객체를 만들어줍니다.</p>
<p>그 외에도 요청 스코프, 세션 스코프 등이 있습니다.</p>
<h2 id="마무리" style="position:relative;"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-label="마무리 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>마무리</h2>
<p>이상으로 다음 포스팅은 <code class="language-text">의존관계 주입(DI)</code>에 대해서 알아보겠습니다 🙇🏻‍♂️</p></div></div><aside><div class="RelatedPosts__Wrapper-sc-1nrzwfn-0 fFDafD"><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/spring/toby-spring/aop/transaction-and-proxy/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="ℹ️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/2139.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[토비의 스프링] 6-1. AOP</h5><time>2020.07.11</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/spring/toby-spring/service-abstraction/mockup-test/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="⚠️" src="https://twemoji.maxcdn.com/v/12.1.6/svg/26a0.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[토비의 스프링] 5-2. 단일 책임 원칙과 테스트 추상화</h5><time>2020.07.07</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/spring/toby-spring/service-abstraction/transaction/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="🔮" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f52e.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[토비의 스프링] 5-1. 서비스 추상화와 트랜잭션</h5><time>2020.07.01</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/spring/toby-spring/spring-exception/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="🛠" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f6e0.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[토비의 스프링] 4. 스프링 예외 처리</h5><time>2020.06.27</time></div></a></div><div class="RelatedPosts__PostCardWrapper-sc-1nrzwfn-1 gvYRzK"><a class="post-card-link" href="/category/spring/toby-spring/template-callback/"><p class="RelatedPosts__PostCardEmoji-sc-1nrzwfn-2 hMlNHl"><img class="emoji" draggable="false" alt="📃" src="https://twemoji.maxcdn.com/v/12.1.6/svg/1f4c3.svg"/></p><div class="RelatedPosts__PostCardContent-sc-1nrzwfn-3 jNfPFJ"><h5>[토비의 스프링] 3. 전략 패턴과 템플릿/콜백에 대해서</h5><time>2020.06.23</time></div></a></div></div><div></div></aside></section></div><div class="TableOfContents__TableIndex-sc-1xzats2-0 ehhrHX"><div class="TableOfContents__TableWrapper-sc-1xzats2-1 bIwdqB table-of-contents"><h1 class="TableOfContents__TableHeader-sc-1xzats2-2 fYkEUy">🔖 Catalog</h1><div class="TableOfContents__TableContents-sc-1xzats2-3 ntjaR"><ul>
<li>
<p><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC%EC%99%80-%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EC%8A%A4%EC%BD%94%ED%94%84">싱글톤 레지스트리와 오브젝트 스코프</a></p>
<ul>
<li>
<ul>
<li><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%EC%9D%98-%EB%8F%99%EC%9D%BC%EC%84%B1%EA%B3%BC-%EB%8F%99%EB%93%B1%EC%84%B1-">오브젝트의 동일성과 동등성 ?</a></li>
<li>
<p><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%A1%9C%EC%84%9C%EC%9D%98-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8">싱글톤 레지스트리로서의 애플리케이션 컨텍스트</a></p>
<ul>
<li><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%80-%EC%99%9C-%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9C%BC%EB%A1%9C-%EB%B9%88%EC%9D%84-%EB%A7%8C%EB%93%A4%EA%B9%8C-">스프링은 왜 싱글톤으로 빈을 만들까 ?</a></li>
<li><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%80-ioc-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88--%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%8A%B8%EB%A6%AC">스프링은 IoC 컨테이너 + 싱글톤 레지스트리</a></li>
</ul>
</li>
<li><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%80%EA%B8%B0-%EB%95%8C%EB%AC%B8%EC%97%90-%EC%A3%BC%EC%9D%98-%ED%95%B4%EC%95%BC%ED%95%A0-%EC%A0%90">싱글톤으로 만들어지기 때문에 주의 해야할 점</a></li>
<li><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88%EC%9D%98-%EC%8A%A4%EC%BD%94%ED%94%84">스프링 빈의 스코프</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/category/spring/toby-spring/object-dependency/singleton-registry/#%EB%A7%88%EB%AC%B4%EB%A6%AC">마무리</a></li>
</ul></div></div></div></div></main></div></div><footer class="Footer__FooterContent-zn4blm-0 qFAAr"><div class="ContentWrapper__IndexContent-sc-11a8f56-0 eYfJyt"><div class="Footer__FooterInner-zn4blm-1 gQCnFr"><div>© <!-- -->2020<!-- -->, Blausee. All rights reserved.</div></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/category/spring/toby-spring/object-dependency/singleton-registry/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-df598884cb90775b7a5f.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-71ad33effa27f873a1fc.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-aaabd06a16a990d9871a.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-a1ed0e377cb1a3e87fce.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-8dab18d4fe118a7a95b5.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-801a9ef7b44fda3e8333.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-801a9ef7b44fda3e8333.js" async=""></script><script src="/53b27b57f60ee3e1ca57a66cde9add975dffb161-5712ac1f8c839e77397f.js" async=""></script><script src="/de71a805-ab927e1633c63597cfb4.js" async=""></script><script src="/app-df598884cb90775b7a5f.js" async=""></script><script src="/styles-09367947dddffb36886c.js" async=""></script><script src="/framework-59a9ef51c55d9b62f7de.js" async=""></script><script src="/webpack-runtime-74b794c52444066d47c3.js" async=""></script></body></html>